{"ast":null,"code":"import * as $array from \"./Array\";\nimport * as $log from \"./Log\";\nvar Native = /** @class */function () {\n  function Native() {\n    var _this = this;\n    this._targets = [];\n    this._observer = new ResizeObserver(function (entries) {\n      $array.each(entries, function (entry) {\n        $array.each(_this._targets, function (x) {\n          if (x.target === entry.target) {\n            x.callback();\n          }\n        });\n      });\n    });\n  }\n  Native.prototype.addTarget = function (target, callback) {\n    this._observer.observe(target, {\n      box: \"content-box\"\n    });\n    this._targets.push({\n      target: target,\n      callback: callback\n    });\n  };\n  Native.prototype.removeTarget = function (target) {\n    this._observer.unobserve(target);\n    $array.keepIf(this._targets, function (x) {\n      return x.target !== target;\n    });\n  };\n  return Native;\n}();\nvar Raf = /** @class */function () {\n  function Raf() {\n    this._targets = [];\n  }\n  Raf.prototype.addTarget = function (target, callback) {\n    var _this = this;\n    if (this._targets.length === 0) {\n      var lastTime_1 = null;\n      var loop_1 = function () {\n        var currentTime = Date.now();\n        if (lastTime_1 === null || currentTime > lastTime_1 + Raf.delay) {\n          lastTime_1 = currentTime;\n          $array.each(_this._targets, function (x) {\n            var newSize = x.target.getBoundingClientRect();\n            if (newSize.width !== x.size.width || newSize.height !== x.size.height) {\n              x.size = newSize;\n              x.callback();\n            }\n          });\n        }\n        _this._timer = requestAnimationFrame(loop_1);\n      };\n      this._timer = requestAnimationFrame(loop_1);\n    }\n    var size = target.getBoundingClientRect();\n    this._targets.push({\n      target: target,\n      callback: callback,\n      size: size\n    });\n  };\n  Raf.prototype.removeTarget = function (target) {\n    $array.keepIf(this._targets, function (x) {\n      return x.target !== target;\n    });\n    if (this._targets.length === 0) {\n      cancelAnimationFrame(this._timer);\n    }\n  };\n  Raf.delay = 200;\n  return Raf;\n}();\nvar observer = null;\nfunction makeSensor() {\n  if (observer === null) {\n    if (typeof ResizeObserver !== \"undefined\") {\n      observer = new Native();\n    } else {\n      observer = new Raf();\n    }\n  }\n  return observer;\n}\nvar ResizeSensor = /** @class */function () {\n  function ResizeSensor(element, callback) {\n    this._disposed = false;\n    this._sensor = makeSensor();\n    this._element = element;\n    this._sensor.addTarget(element, callback);\n  }\n  ResizeSensor.prototype.isDisposed = function () {\n    return this._disposed;\n  };\n  ResizeSensor.prototype.dispose = function () {\n    if (!this._disposed) {\n      this._disposed = true;\n      this._sensor.removeTarget(this._element);\n    }\n  };\n  Object.defineProperty(ResizeSensor.prototype, \"sensor\", {\n    get: function () {\n      return this._sensor;\n    },\n    enumerable: true,\n    configurable: true\n  });\n  /**\r\n   * Deprecated: do not use.\r\n   *\r\n   * @ignore Exclude from docs\r\n   */\n  ResizeSensor.prototype.reset = function () {\n    $log.warn(\"resizeSensor.reset() is no longer needed and can be removed\");\n  };\n  return ResizeSensor;\n}();\nexport { ResizeSensor };","map":{"version":3,"mappings":"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","names":["$array","$log","_observer","ResizeObserver","entries","each","entry","_this","_targets","x","target","callback","Native","observe","box","push","unobserve","keepIf","Raf","length","lastTime_1","loop_1","currentTime","Date","now","delay","newSize","getBoundingClientRect","width","size","height","_timer","requestAnimationFrame","cancelAnimationFrame","observer","makeSensor","element","_sensor","_element","addTarget","ResizeSensor","_disposed","removeTarget","Object","warn"],"sources":["C:\\Users\\Lucian\\Documents\\DEV\\nodejs\\stock-market-api\\dev\\static\\node_modules\\src\\.internal\\core\\utils\\ResizeSensor.ts"],"sourcesContent":["import * as $array from \"./Array\";\nimport * as $log from \"./Log\";\n\n\ninterface Sensor {\n\taddTarget(target: Element, callback: () => void): void;\n\tremoveTarget(target: Element): void;\n}\n\n\ndeclare const ResizeObserver: any;\n\nclass Native implements Sensor {\n\tprivate _observer: any;\n\tprivate _targets: Array<{ target: Element, callback: () => void }> = [];\n\n\tconstructor() {\n\t\tthis._observer = new ResizeObserver((entries: Array<any>) => {\n\t\t\t$array.each(entries, (entry) => {\n\t\t\t\t$array.each(this._targets, (x) => {\n\t\t\t\t\tif (x.target === entry.target) {\n\t\t\t\t\t\tx.callback();\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t});\n\t}\n\n\taddTarget(target: Element, callback: () => void) {\n\t\tthis._observer.observe(target, { box: \"content-box\" });\n\t\tthis._targets.push({ target, callback });\n\t}\n\n\tremoveTarget(target: Element) {\n\t\tthis._observer.unobserve(target);\n\n\t\t$array.keepIf(this._targets, (x) => {\n\t\t\treturn x.target !== target;\n\t\t});\n\t}\n}\n\n\nclass Raf implements Sensor {\n\tpublic static delay: number = 200;\n\n\tprivate _timer: number | undefined;\n\tprivate _targets: Array<{ target: Element, callback: () => void, size: ClientRect | DOMRect }> = [];\n\n\taddTarget(target: Element, callback: () => void) {\n\t\tif (this._targets.length === 0) {\n\t\t\tlet lastTime: number | null = null;\n\n\t\t\tconst loop = () => {\n\t\t\t\tconst currentTime = Date.now();\n\n\t\t\t\tif (lastTime === null || currentTime > (lastTime + Raf.delay)) {\n\t\t\t\t\tlastTime = currentTime;\n\n\t\t\t\t\t$array.each(this._targets, (x) => {\n\t\t\t\t\t\tlet newSize = x.target.getBoundingClientRect();\n\n\t\t\t\t\t\tif (newSize.width !== x.size.width || newSize.height !== x.size.height) {\n\t\t\t\t\t\t\tx.size = newSize;\n\t\t\t\t\t\t\tx.callback();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tthis._timer = requestAnimationFrame(loop);\n\t\t\t};\n\n\t\t\tthis._timer = requestAnimationFrame(loop);\n\t\t}\n\n\t\tlet size = target.getBoundingClientRect();\n\t\tthis._targets.push({ target, callback, size });\n\t}\n\n\tremoveTarget(target: Element) {\n\t\t$array.keepIf(this._targets, (x) => {\n\t\t\treturn x.target !== target;\n\t\t});\n\n\t\tif (this._targets.length === 0) {\n\t\t\tcancelAnimationFrame(this._timer);\n\t\t}\n\t}\n}\n\n\nlet observer: Sensor | null = null;\n\nfunction makeSensor(): Sensor {\n\tif (observer === null) {\n\t\tif (typeof ResizeObserver !== \"undefined\") {\n\t\t\tobserver = new Native();\n\n\t\t} else {\n\t\t\tobserver = new Raf();\n\t\t}\n\t}\n\n\treturn observer;\n}\n\nexport class ResizeSensor {\n\tprivate _sensor: Sensor;\n\tprivate _element: Element;\n\tprivate _disposed: boolean = false;\n\n\tconstructor(element: Element, callback: () => void) {\n\t\tthis._sensor = makeSensor();\n\t\tthis._element = element;\n\t\tthis._sensor.addTarget(element, callback);\n\t}\n\n\tpublic isDisposed() {\n\t\treturn this._disposed;\n\t}\n\n\tpublic dispose() {\n\t\tif (!this._disposed) {\n\t\t\tthis._disposed = true;\n\t\t\tthis._sensor.removeTarget(this._element);\n\t\t}\n\t}\n\n\tpublic get sensor(): Sensor {\n\t\treturn this._sensor;\n\t}\n\n\t/**\n\t * Deprecated: do not use.\n\t *\n\t * @ignore Exclude from docs\n\t */\n\tpublic reset() {\n\t\t$log.warn(\"resizeSensor.reset() is no longer needed and can be removed\");\n\t}\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}