{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Lucian\\\\Documents\\\\DEV\\\\nodejs\\\\stock-market-api\\\\dev\\\\static\\\\src\\\\components\\\\HighChart.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst {\n  Highcharts\n} = window;\n// export class Candlestick {\n//   timestamp: number;\n//   close: number;\n//   high: number;\n//   low: number;\n//   open: number;\n\n//   constructor({ timestamp, open, close, high, low }: TCandleStick) {\n//     this.timestamp = parseInt(timestamp.toString());\n//     this.open = parseFloat(open.toString());\n//     this.close = parseFloat(close.toString());\n//     this.high = parseFloat(high.toString());\n//     this.low = parseFloat(low.toString());\n//   }\n// }\n\n// export class VolumeBar {\n//   timestamp: number;\n//   volume: number;\n\n//   constructor({ timestamp, volume }: TVolume) {\n//     this.timestamp = parseInt(timestamp.toString());\n//     this.volume = parseFloat(volume.toString());\n//   }\n// }\n\nexport function CandleStickChart(_ref) {\n  _s();\n  let {\n    chartData\n  } = _ref;\n  const {\n    dataPoints,\n    symbol\n  } = chartData;\n  const divRef = useRef();\n  // const [chart, setChart] = useState<CandleStickChartElement>();\n\n  useEffect(() => {\n    // new CandleStickChartElement(divRef?.current, dataPoints).draw();\n    if (dataPoints && divRef !== null && divRef !== void 0 && divRef.current) {\n      // split the data set into candles and volumes\n      const candles = dataPoints.reduce((arr, point) => {\n        arr.push([point.timestamp, Number(point.open.toFixed(2)), Number(point.high.toFixed(2)), Number(point.low.toFixed(2)), Number(point.close.toFixed(2))]);\n        return arr;\n      }, []);\n      const volumes = dataPoints.reduce((arr, point) => {\n        arr.push([point.timestamp, point.volume]);\n        return arr;\n      }, []);\n      ;\n      const chart = Highcharts.stockChart(divRef === null || divRef === void 0 ? void 0 : divRef.current, {\n        yAxis: [{\n          labels: {\n            align: 'left'\n          },\n          height: '80%',\n          resize: {\n            enabled: true\n          }\n        }, {\n          labels: {\n            align: 'left'\n          },\n          top: '80%',\n          height: '20%',\n          offset: 0\n        }],\n        tooltip: {\n          shape: 'square',\n          headerShape: 'callout',\n          borderWidth: 0,\n          shadow: false,\n          positioner: (width, height, point) => {\n            // var chart = this.chart,\n            let position;\n            if (point.isHeader) {\n              position = {\n                x: Math.max(\n                // Left side limit\n                chart.plotLeft, Math.min(point.plotX + chart.plotLeft - width / 2,\n                // Right side limit\n                chart.chartWidth - width - chart.marginRight)),\n                y: point.plotY\n              };\n            } else {\n              position = {\n                x: point.series.chart.plotLeft,\n                y: point.series.yAxis.top - chart.plotTop\n              };\n            }\n            return position;\n          }\n        },\n        series: [{\n          type: 'candlestick',\n          id: `${symbol}-ohlc`,\n          name: `${symbol} Stock Price`,\n          data: candles\n        }, {\n          type: 'column',\n          id: `${symbol}-volume`,\n          name: `${symbol} Volume`,\n          data: volumes,\n          yAxis: 1\n        }],\n        responsive: {\n          rules: [{\n            condition: {\n              maxWidth: 800\n            },\n            chartOptions: {\n              rangeSelector: {\n                inputEnabled: false\n              }\n            }\n          }]\n        }\n      });\n    }\n  }, [dataPoints, symbol]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"chart\",\n    ref: divRef,\n    style: {\n      width: '100%',\n      height: '600px'\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 142,\n    columnNumber: 11\n  }, this);\n}\n_s(CandleStickChart, \"HI2rmkDStaXKpoO1B+Q8/ihvhA0=\");\n_c = CandleStickChart;\nexport default CandleStickChart;\nvar _c;\n$RefreshReg$(_c, \"CandleStickChart\");","map":{"version":3,"names":["React","useEffect","useRef","Highcharts","window","CandleStickChart","chartData","dataPoints","symbol","divRef","current","candles","reduce","arr","point","push","timestamp","Number","open","toFixed","high","low","close","volumes","volume","chart","stockChart","yAxis","labels","align","height","resize","enabled","top","offset","tooltip","shape","headerShape","borderWidth","shadow","positioner","width","position","isHeader","x","Math","max","plotLeft","min","plotX","chartWidth","marginRight","y","plotY","series","plotTop","type","id","name","data","responsive","rules","condition","maxWidth","chartOptions","rangeSelector","inputEnabled"],"sources":["C:/Users/Lucian/Documents/DEV/nodejs/stock-market-api/dev/static/src/components/HighChart.tsx"],"sourcesContent":["import React, { LegacyRef, useEffect, useRef } from 'react';\r\n\r\nconst { Highcharts } = window as any;\r\n\r\nexport interface ICandleStickChartProps {\r\n  chartData: IChart;\r\n}\r\n\r\n\r\n// export class Candlestick {\r\n//   timestamp: number;\r\n//   close: number;\r\n//   high: number;\r\n//   low: number;\r\n//   open: number;\r\n\r\n//   constructor({ timestamp, open, close, high, low }: TCandleStick) {\r\n//     this.timestamp = parseInt(timestamp.toString());\r\n//     this.open = parseFloat(open.toString());\r\n//     this.close = parseFloat(close.toString());\r\n//     this.high = parseFloat(high.toString());\r\n//     this.low = parseFloat(low.toString());\r\n//   }\r\n// }\r\n\r\n// export class VolumeBar {\r\n//   timestamp: number;\r\n//   volume: number;\r\n\r\n//   constructor({ timestamp, volume }: TVolume) {\r\n//     this.timestamp = parseInt(timestamp.toString());\r\n//     this.volume = parseFloat(volume.toString());\r\n//   }\r\n// }\r\n\r\nexport function CandleStickChart({chartData}: ICandleStickChartProps) {\r\n  const { dataPoints, symbol } = chartData;\r\n  const divRef = useRef<LegacyRef<HTMLDivElement>>() as any;\r\n  // const [chart, setChart] = useState<CandleStickChartElement>();\r\n\r\n  useEffect(() => {\r\n    // new CandleStickChartElement(divRef?.current, dataPoints).draw();\r\n    if (dataPoints && divRef?.current) {\r\n      // split the data set into candles and volumes\r\n      const candles = dataPoints.reduce((arr, point) => {\r\n        arr.push([\r\n          point.timestamp,\r\n          Number(point.open.toFixed(2)),\r\n          Number(point.high.toFixed(2)),\r\n          Number(point.low.toFixed(2)),\r\n          Number(point.close.toFixed(2))\r\n        ]);\r\n        return arr;\r\n      }, [] as any[]);\r\n      const volumes = dataPoints.reduce((arr, point) => {\r\n        arr.push([\r\n          point.timestamp,\r\n          point.volume\r\n        ]);\r\n        return arr;\r\n      }, [] as any[]);;\r\n\r\n\r\n      const chart = Highcharts.stockChart(divRef?.current, {\r\n        yAxis: [{\r\n            labels: {\r\n                align: 'left'\r\n            },\r\n            height: '80%',\r\n            resize: {\r\n                enabled: true\r\n            }\r\n        }, {\r\n            labels: {\r\n                align: 'left'\r\n            },\r\n            top: '80%',\r\n            height: '20%',\r\n            offset: 0\r\n        }],\r\n        tooltip: {\r\n            shape: 'square',\r\n            headerShape: 'callout',\r\n            borderWidth: 0,\r\n            shadow: false,\r\n            positioner: (width: number, height: number, point: any) => {\r\n                // var chart = this.chart,\r\n                let position;\r\n\r\n                if (point.isHeader) {\r\n                    position = {\r\n                        x: Math.max(\r\n                            // Left side limit\r\n                            chart.plotLeft,\r\n                            Math.min(\r\n                                point.plotX + chart.plotLeft - width / 2,\r\n                                // Right side limit\r\n                                chart.chartWidth - width - chart.marginRight\r\n                            )\r\n                        ),\r\n                        y: point.plotY\r\n                    };\r\n                } else {\r\n                    position = {\r\n                        x: point.series.chart.plotLeft,\r\n                        y: point.series.yAxis.top - chart.plotTop\r\n                    };\r\n                }\r\n\r\n                return position;\r\n            }\r\n        },\r\n        series: [{\r\n            type: 'candlestick',\r\n            id: `${symbol}-ohlc`,\r\n            name: `${symbol} Stock Price`,\r\n            data: candles\r\n        }, {\r\n            type: 'column',\r\n            id: `${symbol}-volume`,\r\n            name: `${symbol} Volume`,\r\n            data: volumes,\r\n            yAxis: 1\r\n        }],\r\n        responsive: {\r\n            rules: [{\r\n                condition: {\r\n                    maxWidth: 800\r\n                },\r\n                chartOptions: {\r\n                    rangeSelector: {\r\n                        inputEnabled: false\r\n                    }\r\n                }\r\n            }]\r\n        }\r\n    });\r\n\r\n    }\r\n  }, [dataPoints, symbol]);\r\n\r\n  return (<div id=\"chart\" ref={divRef} style={{ width: '100%', height: '600px'}}></div>);\r\n}\r\nexport default CandleStickChart;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}