{"ast":null,"code":"'use strict';\n\n(function () {\n  var out$ = typeof exports != 'undefined' && exports || typeof define != 'undefined' && {} || this || window;\n  if (typeof define !== 'undefined') define('save-svg-as-png', [], function () {\n    return out$;\n  });\n  out$.default = out$;\n  var xmlNs = 'http://www.w3.org/2000/xmlns/';\n  var xhtmlNs = 'http://www.w3.org/1999/xhtml';\n  var svgNs = 'http://www.w3.org/2000/svg';\n  var doctype = '<?xml version=\"1.0\" standalone=\"no\"?><!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\" [<!ENTITY nbsp \"&#160;\">]>';\n  var urlRegex = /url\\([\"']?(.+?)[\"']?\\)/;\n  var fontFormats = {\n    woff2: 'font/woff2',\n    woff: 'font/woff',\n    otf: 'application/x-font-opentype',\n    ttf: 'application/x-font-ttf',\n    eot: 'application/vnd.ms-fontobject',\n    sfnt: 'application/font-sfnt',\n    svg: 'image/svg+xml'\n  };\n  var isElement = function isElement(obj) {\n    return obj instanceof HTMLElement || obj instanceof SVGElement;\n  };\n  var requireDomNode = function requireDomNode(el) {\n    if (!isElement(el)) throw new Error('an HTMLElement or SVGElement is required; got ' + el);\n  };\n  var requireDomNodePromise = function requireDomNodePromise(el) {\n    return new Promise(function (resolve, reject) {\n      if (isElement(el)) resolve(el);else reject(new Error('an HTMLElement or SVGElement is required; got ' + el));\n    });\n  };\n  var isExternal = function isExternal(url) {\n    return url && url.lastIndexOf('http', 0) === 0 && url.lastIndexOf(window.location.host) === -1;\n  };\n  var getFontMimeTypeFromUrl = function getFontMimeTypeFromUrl(fontUrl) {\n    var formats = Object.keys(fontFormats).filter(function (extension) {\n      return fontUrl.indexOf('.' + extension) > 0;\n    }).map(function (extension) {\n      return fontFormats[extension];\n    });\n    if (formats) return formats[0];\n    console.error('Unknown font format for ' + fontUrl + '. Fonts may not be working correctly.');\n    return 'application/octet-stream';\n  };\n  var arrayBufferToBase64 = function arrayBufferToBase64(buffer) {\n    var binary = '';\n    var bytes = new Uint8Array(buffer);\n    for (var i = 0; i < bytes.byteLength; i++) {\n      binary += String.fromCharCode(bytes[i]);\n    }\n    return window.btoa(binary);\n  };\n  var getDimension = function getDimension(el, clone, dim) {\n    var v = el.viewBox && el.viewBox.baseVal && el.viewBox.baseVal[dim] || clone.getAttribute(dim) !== null && !clone.getAttribute(dim).match(/%$/) && parseInt(clone.getAttribute(dim)) || el.getBoundingClientRect()[dim] || parseInt(clone.style[dim]) || parseInt(window.getComputedStyle(el).getPropertyValue(dim));\n    return typeof v === 'undefined' || v === null || isNaN(parseFloat(v)) ? 0 : v;\n  };\n  var getDimensions = function getDimensions(el, clone, width, height) {\n    if (el.tagName === 'svg') return {\n      width: width || getDimension(el, clone, 'width'),\n      height: height || getDimension(el, clone, 'height')\n    };else if (el.getBBox) {\n      var _el$getBBox = el.getBBox(),\n        x = _el$getBBox.x,\n        y = _el$getBBox.y,\n        _width = _el$getBBox.width,\n        _height = _el$getBBox.height;\n      return {\n        width: x + _width,\n        height: y + _height\n      };\n    }\n  };\n  var reEncode = function reEncode(data) {\n    return decodeURIComponent(encodeURIComponent(data).replace(/%([0-9A-F]{2})/g, function (match, p1) {\n      var c = String.fromCharCode('0x' + p1);\n      return c === '%' ? '%25' : c;\n    }));\n  };\n  var uriToBlob = function uriToBlob(uri) {\n    var byteString = window.atob(uri.split(',')[1]);\n    var mimeString = uri.split(',')[0].split(':')[1].split(';')[0];\n    var buffer = new ArrayBuffer(byteString.length);\n    var intArray = new Uint8Array(buffer);\n    for (var i = 0; i < byteString.length; i++) {\n      intArray[i] = byteString.charCodeAt(i);\n    }\n    return new Blob([buffer], {\n      type: mimeString\n    });\n  };\n  var query = function query(el, selector) {\n    if (!selector) return;\n    try {\n      return el.querySelector(selector) || el.parentNode && el.parentNode.querySelector(selector);\n    } catch (err) {\n      console.warn('Invalid CSS selector \"' + selector + '\"', err);\n    }\n  };\n  var detectCssFont = function detectCssFont(rule, href) {\n    // Match CSS font-face rules to external links.\n    // @font-face {\n    //   src: local('Abel'), url(https://fonts.gstatic.com/s/abel/v6/UzN-iejR1VoXU2Oc-7LsbvesZW2xOQ-xsNqO47m55DA.woff2);\n    // }\n    var match = rule.cssText.match(urlRegex);\n    var url = match && match[1] || '';\n    if (!url || url.match(/^data:/) || url === 'about:blank') return;\n    var fullUrl = url.startsWith('../') ? href + '/../' + url : url.startsWith('./') ? href + '/.' + url : url;\n    return {\n      text: rule.cssText,\n      format: getFontMimeTypeFromUrl(fullUrl),\n      url: fullUrl\n    };\n  };\n  var inlineImages = function inlineImages(el) {\n    return Promise.all(Array.from(el.querySelectorAll('image')).map(function (image) {\n      var href = image.getAttributeNS('http://www.w3.org/1999/xlink', 'href') || image.getAttribute('href');\n      if (!href) return Promise.resolve(null);\n      if (isExternal(href)) {\n        href += (href.indexOf('?') === -1 ? '?' : '&') + 't=' + new Date().valueOf();\n      }\n      return new Promise(function (resolve, reject) {\n        var canvas = document.createElement('canvas');\n        var img = new Image();\n        img.crossOrigin = 'anonymous';\n        img.src = href;\n        img.onerror = function () {\n          return reject(new Error('Could not load ' + href));\n        };\n        img.onload = function () {\n          canvas.width = img.width;\n          canvas.height = img.height;\n          canvas.getContext('2d').drawImage(img, 0, 0);\n          image.setAttributeNS('http://www.w3.org/1999/xlink', 'href', canvas.toDataURL('image/png'));\n          resolve(true);\n        };\n      });\n    }));\n  };\n  var cachedFonts = {};\n  var inlineFonts = function inlineFonts(fonts) {\n    return Promise.all(fonts.map(function (font) {\n      return new Promise(function (resolve, reject) {\n        if (cachedFonts[font.url]) return resolve(cachedFonts[font.url]);\n        var req = new XMLHttpRequest();\n        req.addEventListener('load', function () {\n          // TODO: it may also be worth it to wait until fonts are fully loaded before\n          // attempting to rasterize them. (e.g. use https://developer.mozilla.org/en-US/docs/Web/API/FontFaceSet)\n          var fontInBase64 = arrayBufferToBase64(req.response);\n          var fontUri = font.text.replace(urlRegex, 'url(\"data:' + font.format + ';base64,' + fontInBase64 + '\")') + '\\n';\n          cachedFonts[font.url] = fontUri;\n          resolve(fontUri);\n        });\n        req.addEventListener('error', function (e) {\n          console.warn('Failed to load font from: ' + font.url, e);\n          cachedFonts[font.url] = null;\n          resolve(null);\n        });\n        req.addEventListener('abort', function (e) {\n          console.warn('Aborted loading font from: ' + font.url, e);\n          resolve(null);\n        });\n        req.open('GET', font.url);\n        req.responseType = 'arraybuffer';\n        req.send();\n      });\n    })).then(function (fontCss) {\n      return fontCss.filter(function (x) {\n        return x;\n      }).join('');\n    });\n  };\n  var cachedRules = null;\n  var styleSheetRules = function styleSheetRules() {\n    if (cachedRules) return cachedRules;\n    return cachedRules = Array.from(document.styleSheets).map(function (sheet) {\n      try {\n        return {\n          rules: sheet.cssRules,\n          href: sheet.href\n        };\n      } catch (e) {\n        console.warn('Stylesheet could not be loaded: ' + sheet.href, e);\n        return {};\n      }\n    });\n  };\n  var inlineCss = function inlineCss(el, options) {\n    var _ref = options || {},\n      selectorRemap = _ref.selectorRemap,\n      modifyStyle = _ref.modifyStyle,\n      modifyCss = _ref.modifyCss,\n      fonts = _ref.fonts,\n      excludeUnusedCss = _ref.excludeUnusedCss;\n    var generateCss = modifyCss || function (selector, properties) {\n      var sel = selectorRemap ? selectorRemap(selector) : selector;\n      var props = modifyStyle ? modifyStyle(properties) : properties;\n      return sel + '{' + props + '}\\n';\n    };\n    var css = [];\n    var detectFonts = typeof fonts === 'undefined';\n    var fontList = fonts || [];\n    styleSheetRules().forEach(function (_ref2) {\n      var rules = _ref2.rules,\n        href = _ref2.href;\n      if (!rules) return;\n      Array.from(rules).forEach(function (rule) {\n        if (typeof rule.style != 'undefined') {\n          if (query(el, rule.selectorText)) css.push(generateCss(rule.selectorText, rule.style.cssText));else if (detectFonts && rule.cssText.match(/^@font-face/)) {\n            var font = detectCssFont(rule, href);\n            if (font) fontList.push(font);\n          } else if (!excludeUnusedCss) {\n            css.push(rule.cssText);\n          }\n        }\n      });\n    });\n    return inlineFonts(fontList).then(function (fontCss) {\n      return css.join('\\n') + fontCss;\n    });\n  };\n  var downloadOptions = function downloadOptions() {\n    if (!navigator.msSaveOrOpenBlob && !('download' in document.createElement('a'))) {\n      return {\n        popup: window.open()\n      };\n    }\n  };\n  out$.prepareSvg = function (el, options, done) {\n    requireDomNode(el);\n    var _ref3 = options || {},\n      _ref3$left = _ref3.left,\n      left = _ref3$left === undefined ? 0 : _ref3$left,\n      _ref3$top = _ref3.top,\n      top = _ref3$top === undefined ? 0 : _ref3$top,\n      w = _ref3.width,\n      h = _ref3.height,\n      _ref3$scale = _ref3.scale,\n      scale = _ref3$scale === undefined ? 1 : _ref3$scale,\n      _ref3$responsive = _ref3.responsive,\n      responsive = _ref3$responsive === undefined ? false : _ref3$responsive,\n      _ref3$excludeCss = _ref3.excludeCss,\n      excludeCss = _ref3$excludeCss === undefined ? false : _ref3$excludeCss;\n    return inlineImages(el).then(function () {\n      var clone = el.cloneNode(true);\n      clone.style.backgroundColor = (options || {}).backgroundColor || el.style.backgroundColor;\n      var _getDimensions = getDimensions(el, clone, w, h),\n        width = _getDimensions.width,\n        height = _getDimensions.height;\n      if (el.tagName !== 'svg') {\n        if (el.getBBox) {\n          if (clone.getAttribute('transform') != null) {\n            clone.setAttribute('transform', clone.getAttribute('transform').replace(/translate\\(.*?\\)/, ''));\n          }\n          var svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n          svg.appendChild(clone);\n          clone = svg;\n        } else {\n          console.error('Attempted to render non-SVG element', el);\n          return;\n        }\n      }\n      clone.setAttribute('version', '1.1');\n      clone.setAttribute('viewBox', [left, top, width, height].join(' '));\n      if (!clone.getAttribute('xmlns')) clone.setAttributeNS(xmlNs, 'xmlns', svgNs);\n      if (!clone.getAttribute('xmlns:xlink')) clone.setAttributeNS(xmlNs, 'xmlns:xlink', 'http://www.w3.org/1999/xlink');\n      if (responsive) {\n        clone.removeAttribute('width');\n        clone.removeAttribute('height');\n        clone.setAttribute('preserveAspectRatio', 'xMinYMin meet');\n      } else {\n        clone.setAttribute('width', width * scale);\n        clone.setAttribute('height', height * scale);\n      }\n      Array.from(clone.querySelectorAll('foreignObject > *')).forEach(function (foreignObject) {\n        foreignObject.setAttributeNS(xmlNs, 'xmlns', foreignObject.tagName === 'svg' ? svgNs : xhtmlNs);\n      });\n      if (excludeCss) {\n        var outer = document.createElement('div');\n        outer.appendChild(clone);\n        var src = outer.innerHTML;\n        if (typeof done === 'function') done(src, width, height);else return {\n          src: src,\n          width: width,\n          height: height\n        };\n      } else {\n        return inlineCss(el, options).then(function (css) {\n          var style = document.createElement('style');\n          style.setAttribute('type', 'text/css');\n          style.innerHTML = '<![CDATA[\\n' + css + '\\n]]>';\n          var defs = document.createElement('defs');\n          defs.appendChild(style);\n          clone.insertBefore(defs, clone.firstChild);\n          var outer = document.createElement('div');\n          outer.appendChild(clone);\n          var src = outer.innerHTML.replace(/NS\\d+:href/gi, 'xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href');\n          if (typeof done === 'function') done(src, width, height);else return {\n            src: src,\n            width: width,\n            height: height\n          };\n        });\n      }\n    });\n  };\n  out$.svgAsDataUri = function (el, options, done) {\n    requireDomNode(el);\n    return out$.prepareSvg(el, options).then(function (_ref4) {\n      var src = _ref4.src,\n        width = _ref4.width,\n        height = _ref4.height;\n      var svgXml = 'data:image/svg+xml;base64,' + window.btoa(reEncode(doctype + src));\n      if (typeof done === 'function') {\n        done(svgXml, width, height);\n      }\n      return svgXml;\n    });\n  };\n  out$.svgAsPngUri = function (el, options, done) {\n    requireDomNode(el);\n    var _ref5 = options || {},\n      _ref5$encoderType = _ref5.encoderType,\n      encoderType = _ref5$encoderType === undefined ? 'image/png' : _ref5$encoderType,\n      _ref5$encoderOptions = _ref5.encoderOptions,\n      encoderOptions = _ref5$encoderOptions === undefined ? 0.8 : _ref5$encoderOptions,\n      canvg = _ref5.canvg;\n    var convertToPng = function convertToPng(_ref6) {\n      var src = _ref6.src,\n        width = _ref6.width,\n        height = _ref6.height;\n      var canvas = document.createElement('canvas');\n      var context = canvas.getContext('2d');\n      var pixelRatio = window.devicePixelRatio || 1;\n      canvas.width = width * pixelRatio;\n      canvas.height = height * pixelRatio;\n      canvas.style.width = canvas.width + 'px';\n      canvas.style.height = canvas.height + 'px';\n      context.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\n      if (canvg) canvg(canvas, src);else context.drawImage(src, 0, 0);\n      var png = void 0;\n      try {\n        png = canvas.toDataURL(encoderType, encoderOptions);\n      } catch (e) {\n        if (typeof SecurityError !== 'undefined' && e instanceof SecurityError || e.name === 'SecurityError') {\n          console.error('Rendered SVG images cannot be downloaded in this browser.');\n          return;\n        } else throw e;\n      }\n      if (typeof done === 'function') done(png, canvas.width, canvas.height);\n      return Promise.resolve(png);\n    };\n    if (canvg) return out$.prepareSvg(el, options).then(convertToPng);else return out$.svgAsDataUri(el, options).then(function (uri) {\n      return new Promise(function (resolve, reject) {\n        var image = new Image();\n        image.onload = function () {\n          return resolve(convertToPng({\n            src: image,\n            width: image.width,\n            height: image.height\n          }));\n        };\n        image.onerror = function () {\n          reject('There was an error loading the data URI as an image on the following SVG\\n' + window.atob(uri.slice(26)) + 'Open the following link to see browser\\'s diagnosis\\n' + uri);\n        };\n        image.src = uri;\n      });\n    });\n  };\n  out$.download = function (name, uri, options) {\n    if (navigator.msSaveOrOpenBlob) navigator.msSaveOrOpenBlob(uriToBlob(uri), name);else {\n      var saveLink = document.createElement('a');\n      if ('download' in saveLink) {\n        saveLink.download = name;\n        saveLink.style.display = 'none';\n        document.body.appendChild(saveLink);\n        try {\n          var blob = uriToBlob(uri);\n          var url = URL.createObjectURL(blob);\n          saveLink.href = url;\n          saveLink.onclick = function () {\n            return requestAnimationFrame(function () {\n              return URL.revokeObjectURL(url);\n            });\n          };\n        } catch (e) {\n          console.error(e);\n          console.warn('Error while getting object URL. Falling back to string URL.');\n          saveLink.href = uri;\n        }\n        saveLink.click();\n        document.body.removeChild(saveLink);\n      } else if (options && options.popup) {\n        options.popup.document.title = name;\n        options.popup.location.replace(uri);\n      }\n    }\n  };\n  out$.saveSvg = function (el, name, options) {\n    var downloadOpts = downloadOptions(); // don't inline, can't be async\n    return requireDomNodePromise(el).then(function (el) {\n      return out$.svgAsDataUri(el, options || {});\n    }).then(function (uri) {\n      return out$.download(name, uri, downloadOpts);\n    });\n  };\n  out$.saveSvgAsPng = function (el, name, options) {\n    var downloadOpts = downloadOptions(); // don't inline, can't be async\n    return requireDomNodePromise(el).then(function (el) {\n      return out$.svgAsPngUri(el, options || {});\n    }).then(function (uri) {\n      return out$.download(name, uri, downloadOpts);\n    });\n  };\n})();","map":{"version":3,"names":["out$","exports","define","window","default","xmlNs","xhtmlNs","svgNs","doctype","urlRegex","fontFormats","woff2","woff","otf","ttf","eot","sfnt","svg","isElement","obj","HTMLElement","SVGElement","requireDomNode","el","Error","requireDomNodePromise","Promise","resolve","reject","isExternal","url","lastIndexOf","location","host","getFontMimeTypeFromUrl","fontUrl","formats","Object","keys","filter","extension","indexOf","map","console","error","arrayBufferToBase64","buffer","binary","bytes","Uint8Array","i","byteLength","String","fromCharCode","btoa","getDimension","clone","dim","v","viewBox","baseVal","getAttribute","match","parseInt","getBoundingClientRect","style","getComputedStyle","getPropertyValue","isNaN","parseFloat","getDimensions","width","height","tagName","getBBox","_el$getBBox","x","y","_width","_height","reEncode","data","decodeURIComponent","encodeURIComponent","replace","p1","c","uriToBlob","uri","byteString","atob","split","mimeString","ArrayBuffer","length","intArray","charCodeAt","Blob","type","query","selector","querySelector","parentNode","err","warn","detectCssFont","rule","href","cssText","fullUrl","startsWith","text","format","inlineImages","all","Array","from","querySelectorAll","image","getAttributeNS","Date","valueOf","canvas","document","createElement","img","Image","crossOrigin","src","onerror","onload","getContext","drawImage","setAttributeNS","toDataURL","cachedFonts","inlineFonts","fonts","font","req","XMLHttpRequest","addEventListener","fontInBase64","response","fontUri","e","open","responseType","send","then","fontCss","join","cachedRules","styleSheetRules","styleSheets","sheet","rules","cssRules","inlineCss","options","_ref","selectorRemap","modifyStyle","modifyCss","excludeUnusedCss","generateCss","properties","sel","props","css","detectFonts","fontList","forEach","_ref2","selectorText","push","downloadOptions","navigator","msSaveOrOpenBlob","popup","prepareSvg","done","_ref3","_ref3$left","left","undefined","_ref3$top","top","w","h","_ref3$scale","scale","_ref3$responsive","responsive","_ref3$excludeCss","excludeCss","cloneNode","backgroundColor","_getDimensions","setAttribute","createElementNS","appendChild","removeAttribute","foreignObject","outer","innerHTML","defs","insertBefore","firstChild","svgAsDataUri","_ref4","svgXml","svgAsPngUri","_ref5","_ref5$encoderType","encoderType","_ref5$encoderOptions","encoderOptions","canvg","convertToPng","_ref6","context","pixelRatio","devicePixelRatio","setTransform","png","SecurityError","name","slice","download","saveLink","display","body","blob","URL","createObjectURL","onclick","requestAnimationFrame","revokeObjectURL","click","removeChild","title","saveSvg","downloadOpts","saveSvgAsPng"],"sources":["C:/Users/Lucian/Documents/DEV/nodejs/stock-market-api/dev/static/node_modules/save-svg-as-png/lib/saveSvgAsPng.js"],"sourcesContent":["'use strict';\n\n(function () {\n  var out$ = typeof exports != 'undefined' && exports || typeof define != 'undefined' && {} || this || window;\n  if (typeof define !== 'undefined') define('save-svg-as-png', [], function () {\n    return out$;\n  });\n  out$.default = out$;\n\n  var xmlNs = 'http://www.w3.org/2000/xmlns/';\n  var xhtmlNs = 'http://www.w3.org/1999/xhtml';\n  var svgNs = 'http://www.w3.org/2000/svg';\n  var doctype = '<?xml version=\"1.0\" standalone=\"no\"?><!DOCTYPE svg PUBLIC \"-//W3C//DTD SVG 1.1//EN\" \"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd\" [<!ENTITY nbsp \"&#160;\">]>';\n  var urlRegex = /url\\([\"']?(.+?)[\"']?\\)/;\n  var fontFormats = {\n    woff2: 'font/woff2',\n    woff: 'font/woff',\n    otf: 'application/x-font-opentype',\n    ttf: 'application/x-font-ttf',\n    eot: 'application/vnd.ms-fontobject',\n    sfnt: 'application/font-sfnt',\n    svg: 'image/svg+xml'\n  };\n\n  var isElement = function isElement(obj) {\n    return obj instanceof HTMLElement || obj instanceof SVGElement;\n  };\n  var requireDomNode = function requireDomNode(el) {\n    if (!isElement(el)) throw new Error('an HTMLElement or SVGElement is required; got ' + el);\n  };\n  var requireDomNodePromise = function requireDomNodePromise(el) {\n    return new Promise(function (resolve, reject) {\n      if (isElement(el)) resolve(el);else reject(new Error('an HTMLElement or SVGElement is required; got ' + el));\n    });\n  };\n  var isExternal = function isExternal(url) {\n    return url && url.lastIndexOf('http', 0) === 0 && url.lastIndexOf(window.location.host) === -1;\n  };\n\n  var getFontMimeTypeFromUrl = function getFontMimeTypeFromUrl(fontUrl) {\n    var formats = Object.keys(fontFormats).filter(function (extension) {\n      return fontUrl.indexOf('.' + extension) > 0;\n    }).map(function (extension) {\n      return fontFormats[extension];\n    });\n    if (formats) return formats[0];\n    console.error('Unknown font format for ' + fontUrl + '. Fonts may not be working correctly.');\n    return 'application/octet-stream';\n  };\n\n  var arrayBufferToBase64 = function arrayBufferToBase64(buffer) {\n    var binary = '';\n    var bytes = new Uint8Array(buffer);\n    for (var i = 0; i < bytes.byteLength; i++) {\n      binary += String.fromCharCode(bytes[i]);\n    }return window.btoa(binary);\n  };\n\n  var getDimension = function getDimension(el, clone, dim) {\n    var v = el.viewBox && el.viewBox.baseVal && el.viewBox.baseVal[dim] || clone.getAttribute(dim) !== null && !clone.getAttribute(dim).match(/%$/) && parseInt(clone.getAttribute(dim)) || el.getBoundingClientRect()[dim] || parseInt(clone.style[dim]) || parseInt(window.getComputedStyle(el).getPropertyValue(dim));\n    return typeof v === 'undefined' || v === null || isNaN(parseFloat(v)) ? 0 : v;\n  };\n\n  var getDimensions = function getDimensions(el, clone, width, height) {\n    if (el.tagName === 'svg') return {\n      width: width || getDimension(el, clone, 'width'),\n      height: height || getDimension(el, clone, 'height')\n    };else if (el.getBBox) {\n      var _el$getBBox = el.getBBox(),\n          x = _el$getBBox.x,\n          y = _el$getBBox.y,\n          _width = _el$getBBox.width,\n          _height = _el$getBBox.height;\n\n      return {\n        width: x + _width,\n        height: y + _height\n      };\n    }\n  };\n\n  var reEncode = function reEncode(data) {\n    return decodeURIComponent(encodeURIComponent(data).replace(/%([0-9A-F]{2})/g, function (match, p1) {\n      var c = String.fromCharCode('0x' + p1);\n      return c === '%' ? '%25' : c;\n    }));\n  };\n\n  var uriToBlob = function uriToBlob(uri) {\n    var byteString = window.atob(uri.split(',')[1]);\n    var mimeString = uri.split(',')[0].split(':')[1].split(';')[0];\n    var buffer = new ArrayBuffer(byteString.length);\n    var intArray = new Uint8Array(buffer);\n    for (var i = 0; i < byteString.length; i++) {\n      intArray[i] = byteString.charCodeAt(i);\n    }\n    return new Blob([buffer], { type: mimeString });\n  };\n\n  var query = function query(el, selector) {\n    if (!selector) return;\n    try {\n      return el.querySelector(selector) || el.parentNode && el.parentNode.querySelector(selector);\n    } catch (err) {\n      console.warn('Invalid CSS selector \"' + selector + '\"', err);\n    }\n  };\n\n  var detectCssFont = function detectCssFont(rule, href) {\n    // Match CSS font-face rules to external links.\n    // @font-face {\n    //   src: local('Abel'), url(https://fonts.gstatic.com/s/abel/v6/UzN-iejR1VoXU2Oc-7LsbvesZW2xOQ-xsNqO47m55DA.woff2);\n    // }\n    var match = rule.cssText.match(urlRegex);\n    var url = match && match[1] || '';\n    if (!url || url.match(/^data:/) || url === 'about:blank') return;\n    var fullUrl = url.startsWith('../') ? href + '/../' + url : url.startsWith('./') ? href + '/.' + url : url;\n    return {\n      text: rule.cssText,\n      format: getFontMimeTypeFromUrl(fullUrl),\n      url: fullUrl\n    };\n  };\n\n  var inlineImages = function inlineImages(el) {\n    return Promise.all(Array.from(el.querySelectorAll('image')).map(function (image) {\n      var href = image.getAttributeNS('http://www.w3.org/1999/xlink', 'href') || image.getAttribute('href');\n      if (!href) return Promise.resolve(null);\n      if (isExternal(href)) {\n        href += (href.indexOf('?') === -1 ? '?' : '&') + 't=' + new Date().valueOf();\n      }\n      return new Promise(function (resolve, reject) {\n        var canvas = document.createElement('canvas');\n        var img = new Image();\n        img.crossOrigin = 'anonymous';\n        img.src = href;\n        img.onerror = function () {\n          return reject(new Error('Could not load ' + href));\n        };\n        img.onload = function () {\n          canvas.width = img.width;\n          canvas.height = img.height;\n          canvas.getContext('2d').drawImage(img, 0, 0);\n          image.setAttributeNS('http://www.w3.org/1999/xlink', 'href', canvas.toDataURL('image/png'));\n          resolve(true);\n        };\n      });\n    }));\n  };\n\n  var cachedFonts = {};\n  var inlineFonts = function inlineFonts(fonts) {\n    return Promise.all(fonts.map(function (font) {\n      return new Promise(function (resolve, reject) {\n        if (cachedFonts[font.url]) return resolve(cachedFonts[font.url]);\n\n        var req = new XMLHttpRequest();\n        req.addEventListener('load', function () {\n          // TODO: it may also be worth it to wait until fonts are fully loaded before\n          // attempting to rasterize them. (e.g. use https://developer.mozilla.org/en-US/docs/Web/API/FontFaceSet)\n          var fontInBase64 = arrayBufferToBase64(req.response);\n          var fontUri = font.text.replace(urlRegex, 'url(\"data:' + font.format + ';base64,' + fontInBase64 + '\")') + '\\n';\n          cachedFonts[font.url] = fontUri;\n          resolve(fontUri);\n        });\n        req.addEventListener('error', function (e) {\n          console.warn('Failed to load font from: ' + font.url, e);\n          cachedFonts[font.url] = null;\n          resolve(null);\n        });\n        req.addEventListener('abort', function (e) {\n          console.warn('Aborted loading font from: ' + font.url, e);\n          resolve(null);\n        });\n        req.open('GET', font.url);\n        req.responseType = 'arraybuffer';\n        req.send();\n      });\n    })).then(function (fontCss) {\n      return fontCss.filter(function (x) {\n        return x;\n      }).join('');\n    });\n  };\n\n  var cachedRules = null;\n  var styleSheetRules = function styleSheetRules() {\n    if (cachedRules) return cachedRules;\n    return cachedRules = Array.from(document.styleSheets).map(function (sheet) {\n      try {\n        return { rules: sheet.cssRules, href: sheet.href };\n      } catch (e) {\n        console.warn('Stylesheet could not be loaded: ' + sheet.href, e);\n        return {};\n      }\n    });\n  };\n\n  var inlineCss = function inlineCss(el, options) {\n    var _ref = options || {},\n        selectorRemap = _ref.selectorRemap,\n        modifyStyle = _ref.modifyStyle,\n        modifyCss = _ref.modifyCss,\n        fonts = _ref.fonts,\n        excludeUnusedCss = _ref.excludeUnusedCss;\n\n    var generateCss = modifyCss || function (selector, properties) {\n      var sel = selectorRemap ? selectorRemap(selector) : selector;\n      var props = modifyStyle ? modifyStyle(properties) : properties;\n      return sel + '{' + props + '}\\n';\n    };\n    var css = [];\n    var detectFonts = typeof fonts === 'undefined';\n    var fontList = fonts || [];\n    styleSheetRules().forEach(function (_ref2) {\n      var rules = _ref2.rules,\n          href = _ref2.href;\n\n      if (!rules) return;\n      Array.from(rules).forEach(function (rule) {\n        if (typeof rule.style != 'undefined') {\n          if (query(el, rule.selectorText)) css.push(generateCss(rule.selectorText, rule.style.cssText));else if (detectFonts && rule.cssText.match(/^@font-face/)) {\n            var font = detectCssFont(rule, href);\n            if (font) fontList.push(font);\n          } else if (!excludeUnusedCss) {\n            css.push(rule.cssText);\n          }\n        }\n      });\n    });\n\n    return inlineFonts(fontList).then(function (fontCss) {\n      return css.join('\\n') + fontCss;\n    });\n  };\n\n  var downloadOptions = function downloadOptions() {\n    if (!navigator.msSaveOrOpenBlob && !('download' in document.createElement('a'))) {\n      return { popup: window.open() };\n    }\n  };\n\n  out$.prepareSvg = function (el, options, done) {\n    requireDomNode(el);\n\n    var _ref3 = options || {},\n        _ref3$left = _ref3.left,\n        left = _ref3$left === undefined ? 0 : _ref3$left,\n        _ref3$top = _ref3.top,\n        top = _ref3$top === undefined ? 0 : _ref3$top,\n        w = _ref3.width,\n        h = _ref3.height,\n        _ref3$scale = _ref3.scale,\n        scale = _ref3$scale === undefined ? 1 : _ref3$scale,\n        _ref3$responsive = _ref3.responsive,\n        responsive = _ref3$responsive === undefined ? false : _ref3$responsive,\n        _ref3$excludeCss = _ref3.excludeCss,\n        excludeCss = _ref3$excludeCss === undefined ? false : _ref3$excludeCss;\n\n    return inlineImages(el).then(function () {\n      var clone = el.cloneNode(true);\n      clone.style.backgroundColor = (options || {}).backgroundColor || el.style.backgroundColor;\n\n      var _getDimensions = getDimensions(el, clone, w, h),\n          width = _getDimensions.width,\n          height = _getDimensions.height;\n\n      if (el.tagName !== 'svg') {\n        if (el.getBBox) {\n          if (clone.getAttribute('transform') != null) {\n            clone.setAttribute('transform', clone.getAttribute('transform').replace(/translate\\(.*?\\)/, ''));\n          }\n          var svg = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n          svg.appendChild(clone);\n          clone = svg;\n        } else {\n          console.error('Attempted to render non-SVG element', el);\n          return;\n        }\n      }\n\n      clone.setAttribute('version', '1.1');\n      clone.setAttribute('viewBox', [left, top, width, height].join(' '));\n      if (!clone.getAttribute('xmlns')) clone.setAttributeNS(xmlNs, 'xmlns', svgNs);\n      if (!clone.getAttribute('xmlns:xlink')) clone.setAttributeNS(xmlNs, 'xmlns:xlink', 'http://www.w3.org/1999/xlink');\n\n      if (responsive) {\n        clone.removeAttribute('width');\n        clone.removeAttribute('height');\n        clone.setAttribute('preserveAspectRatio', 'xMinYMin meet');\n      } else {\n        clone.setAttribute('width', width * scale);\n        clone.setAttribute('height', height * scale);\n      }\n\n      Array.from(clone.querySelectorAll('foreignObject > *')).forEach(function (foreignObject) {\n        foreignObject.setAttributeNS(xmlNs, 'xmlns', foreignObject.tagName === 'svg' ? svgNs : xhtmlNs);\n      });\n\n      if (excludeCss) {\n        var outer = document.createElement('div');\n        outer.appendChild(clone);\n        var src = outer.innerHTML;\n        if (typeof done === 'function') done(src, width, height);else return { src: src, width: width, height: height };\n      } else {\n        return inlineCss(el, options).then(function (css) {\n          var style = document.createElement('style');\n          style.setAttribute('type', 'text/css');\n          style.innerHTML = '<![CDATA[\\n' + css + '\\n]]>';\n\n          var defs = document.createElement('defs');\n          defs.appendChild(style);\n          clone.insertBefore(defs, clone.firstChild);\n\n          var outer = document.createElement('div');\n          outer.appendChild(clone);\n          var src = outer.innerHTML.replace(/NS\\d+:href/gi, 'xmlns:xlink=\"http://www.w3.org/1999/xlink\" xlink:href');\n\n          if (typeof done === 'function') done(src, width, height);else return { src: src, width: width, height: height };\n        });\n      }\n    });\n  };\n\n  out$.svgAsDataUri = function (el, options, done) {\n    requireDomNode(el);\n    return out$.prepareSvg(el, options).then(function (_ref4) {\n      var src = _ref4.src,\n          width = _ref4.width,\n          height = _ref4.height;\n\n      var svgXml = 'data:image/svg+xml;base64,' + window.btoa(reEncode(doctype + src));\n      if (typeof done === 'function') {\n        done(svgXml, width, height);\n      }\n      return svgXml;\n    });\n  };\n\n  out$.svgAsPngUri = function (el, options, done) {\n    requireDomNode(el);\n\n    var _ref5 = options || {},\n        _ref5$encoderType = _ref5.encoderType,\n        encoderType = _ref5$encoderType === undefined ? 'image/png' : _ref5$encoderType,\n        _ref5$encoderOptions = _ref5.encoderOptions,\n        encoderOptions = _ref5$encoderOptions === undefined ? 0.8 : _ref5$encoderOptions,\n        canvg = _ref5.canvg;\n\n    var convertToPng = function convertToPng(_ref6) {\n      var src = _ref6.src,\n          width = _ref6.width,\n          height = _ref6.height;\n\n      var canvas = document.createElement('canvas');\n      var context = canvas.getContext('2d');\n      var pixelRatio = window.devicePixelRatio || 1;\n\n      canvas.width = width * pixelRatio;\n      canvas.height = height * pixelRatio;\n      canvas.style.width = canvas.width + 'px';\n      canvas.style.height = canvas.height + 'px';\n      context.setTransform(pixelRatio, 0, 0, pixelRatio, 0, 0);\n\n      if (canvg) canvg(canvas, src);else context.drawImage(src, 0, 0);\n\n      var png = void 0;\n      try {\n        png = canvas.toDataURL(encoderType, encoderOptions);\n      } catch (e) {\n        if (typeof SecurityError !== 'undefined' && e instanceof SecurityError || e.name === 'SecurityError') {\n          console.error('Rendered SVG images cannot be downloaded in this browser.');\n          return;\n        } else throw e;\n      }\n      if (typeof done === 'function') done(png, canvas.width, canvas.height);\n      return Promise.resolve(png);\n    };\n\n    if (canvg) return out$.prepareSvg(el, options).then(convertToPng);else return out$.svgAsDataUri(el, options).then(function (uri) {\n      return new Promise(function (resolve, reject) {\n        var image = new Image();\n        image.onload = function () {\n          return resolve(convertToPng({\n            src: image,\n            width: image.width,\n            height: image.height\n          }));\n        };\n        image.onerror = function () {\n          reject('There was an error loading the data URI as an image on the following SVG\\n' + window.atob(uri.slice(26)) + 'Open the following link to see browser\\'s diagnosis\\n' + uri);\n        };\n        image.src = uri;\n      });\n    });\n  };\n\n  out$.download = function (name, uri, options) {\n    if (navigator.msSaveOrOpenBlob) navigator.msSaveOrOpenBlob(uriToBlob(uri), name);else {\n      var saveLink = document.createElement('a');\n      if ('download' in saveLink) {\n        saveLink.download = name;\n        saveLink.style.display = 'none';\n        document.body.appendChild(saveLink);\n        try {\n          var blob = uriToBlob(uri);\n          var url = URL.createObjectURL(blob);\n          saveLink.href = url;\n          saveLink.onclick = function () {\n            return requestAnimationFrame(function () {\n              return URL.revokeObjectURL(url);\n            });\n          };\n        } catch (e) {\n          console.error(e);\n          console.warn('Error while getting object URL. Falling back to string URL.');\n          saveLink.href = uri;\n        }\n        saveLink.click();\n        document.body.removeChild(saveLink);\n      } else if (options && options.popup) {\n        options.popup.document.title = name;\n        options.popup.location.replace(uri);\n      }\n    }\n  };\n\n  out$.saveSvg = function (el, name, options) {\n    var downloadOpts = downloadOptions(); // don't inline, can't be async\n    return requireDomNodePromise(el).then(function (el) {\n      return out$.svgAsDataUri(el, options || {});\n    }).then(function (uri) {\n      return out$.download(name, uri, downloadOpts);\n    });\n  };\n\n  out$.saveSvgAsPng = function (el, name, options) {\n    var downloadOpts = downloadOptions(); // don't inline, can't be async\n    return requireDomNodePromise(el).then(function (el) {\n      return out$.svgAsPngUri(el, options || {});\n    }).then(function (uri) {\n      return out$.download(name, uri, downloadOpts);\n    });\n  };\n})();"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}