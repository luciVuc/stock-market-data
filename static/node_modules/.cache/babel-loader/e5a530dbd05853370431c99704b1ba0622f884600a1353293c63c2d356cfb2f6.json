{"ast":null,"code":"/**\r\n * Candlestick Series module.\r\n */\nimport { __extends } from \"tslib\";\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\nimport { CandlestickSeries, CandlestickSeriesDataItem } from \"./CandlestickSeries\";\nimport { visualProperties } from \"../../core/Sprite\";\nimport { OHLC } from \"../elements/OHLC\";\nimport { registry } from \"../../core/Registry\";\nimport * as $object from \"../../core/utils/Object\";\nimport * as $iter from \"../../core/utils/Iterator\";\nimport * as $type from \"../../core/utils/Type\";\n/**\r\n * ============================================================================\r\n * DATA ITEM\r\n * ============================================================================\r\n * @hidden\r\n */\n/**\r\n * Defines a [[DataItem]] for [[OHLCSeries]].\r\n *\r\n * @see {@link DataItem}\r\n */\nvar OHLCSeriesDataItem = /** @class */function (_super) {\n  __extends(OHLCSeriesDataItem, _super);\n  /**\r\n   * Defines a type of [[Component]] this data item is used for\r\n   * @todo Disabled to work around TS bug (see if we can re-enable it again)\r\n   */\n  //public _component!: OHLCSeries;\n  /**\r\n   * Constructor\r\n   */\n  function OHLCSeriesDataItem() {\n    var _this = _super.call(this) || this;\n    _this.className = \"OHLCSeriesDataItem\";\n    _this.applyTheme();\n    return _this;\n  }\n  return OHLCSeriesDataItem;\n}(CandlestickSeriesDataItem);\nexport { OHLCSeriesDataItem };\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\n/**\r\n * Defines [[Series]] for a candlestick graph.\r\n *\r\n * @see {@link IOHLCSeriesEvents} for a list of available Events\r\n * @see {@link IOHLCSeriesAdapters} for a list of available Adapters\r\n * @todo Example\r\n * @important\r\n */\nvar OHLCSeries = /** @class */function (_super) {\n  __extends(OHLCSeries, _super);\n  /**\r\n   * Constructor\r\n   */\n  function OHLCSeries() {\n    var _this = _super.call(this) || this;\n    _this.className = \"OHLCSeries\";\n    _this.applyTheme();\n    return _this;\n  }\n  /**\r\n   * Sets defaults that instantiate some objects that rely on parent, so they\r\n   * cannot be set in constructor.\r\n   */\n  OHLCSeries.prototype.applyInternalDefaults = function () {\n    _super.prototype.applyInternalDefaults.call(this);\n    if (!$type.hasValue(this.readerTitle)) {\n      this.readerTitle = this.language.translate(\"OHLC Series\");\n    }\n  };\n  /**\r\n   * Returns a new/empty DataItem of the type appropriate for this object.\r\n   *\r\n   * @see {@link DataItem}\r\n   * @return Data Item\r\n   */\n  OHLCSeries.prototype.createDataItem = function () {\n    return new OHLCSeriesDataItem();\n  };\n  OHLCSeries.prototype.validateCandlestick = function (dataItem) {\n    var column = dataItem.column;\n    if (column) {\n      var openLine_1 = column.openLine;\n      var highLowLine_1 = column.highLowLine;\n      var closeLine_1 = column.closeLine;\n      if (this.baseAxis == this.xAxis) {\n        var x = column.pixelWidth / 2;\n        highLowLine_1.x = x;\n        // TODO can these be removed ?\n        dataItem.getWorkingValue(this.yOpenField);\n        dataItem.getWorkingValue(this.yField);\n        var yOpen = this.yAxis.getY(dataItem, this.yOpenField);\n        var yClose = this.yAxis.getY(dataItem, this.yField);\n        var yLow = this.yAxis.getY(dataItem, this.yLowField);\n        var yHigh = this.yAxis.getY(dataItem, this.yHighField);\n        var pixelY = column.pixelY;\n        openLine_1.y1 = yOpen - pixelY;\n        openLine_1.y2 = yOpen - pixelY;\n        openLine_1.x1 = 0;\n        openLine_1.x2 = x;\n        closeLine_1.y1 = yClose - pixelY;\n        closeLine_1.y2 = yClose - pixelY;\n        closeLine_1.x1 = x;\n        closeLine_1.x2 = 2 * x;\n        highLowLine_1.y1 = yHigh - pixelY;\n        highLowLine_1.y2 = yLow - pixelY;\n      }\n      if (this.baseAxis == this.yAxis) {\n        var y = column.pixelHeight / 2;\n        highLowLine_1.y = y;\n        // TODO can these be removed ?\n        dataItem.getWorkingValue(this.xOpenField);\n        dataItem.getWorkingValue(this.xField);\n        var xOpen = this.xAxis.getX(dataItem, this.xOpenField);\n        var xClose = this.xAxis.getX(dataItem, this.xField);\n        var xLow = this.xAxis.getX(dataItem, this.xLowField);\n        var xHigh = this.xAxis.getX(dataItem, this.xHighField);\n        var pixelX = column.pixelX;\n        openLine_1.x1 = xOpen - pixelX;\n        openLine_1.x2 = xOpen - pixelX;\n        openLine_1.y1 = y;\n        openLine_1.y2 = 2 * y;\n        closeLine_1.x1 = xClose - pixelX;\n        closeLine_1.x2 = xClose - pixelX;\n        closeLine_1.y1 = 0;\n        closeLine_1.y2 = y;\n        highLowLine_1.x1 = xHigh - pixelX;\n        highLowLine_1.x2 = xLow - pixelX;\n      }\n      $iter.each(this.axisRanges.iterator(), function (axisRange) {\n        var rangeColumn = dataItem.rangesColumns.getKey(axisRange.uid);\n        if (rangeColumn) {\n          var rangeOpenLine = rangeColumn.openLine;\n          rangeOpenLine.x = openLine_1.x;\n          rangeOpenLine.y = openLine_1.y;\n          rangeOpenLine.x1 = openLine_1.x1;\n          rangeOpenLine.x2 = openLine_1.x2;\n          rangeOpenLine.y1 = openLine_1.y1;\n          rangeOpenLine.y2 = openLine_1.y2;\n          var rangeCloseLine = rangeColumn.closeLine;\n          rangeCloseLine.x = closeLine_1.x;\n          rangeCloseLine.y = closeLine_1.y;\n          rangeCloseLine.x1 = closeLine_1.x1;\n          rangeCloseLine.x2 = closeLine_1.x2;\n          rangeCloseLine.y1 = closeLine_1.y1;\n          rangeCloseLine.y2 = closeLine_1.y2;\n          var rangeHighLowLine = rangeColumn.highLowLine;\n          rangeHighLowLine.x = highLowLine_1.x;\n          rangeHighLowLine.y = highLowLine_1.y;\n          rangeHighLowLine.x1 = highLowLine_1.x1;\n          rangeHighLowLine.x2 = highLowLine_1.x2;\n          rangeHighLowLine.y1 = highLowLine_1.y1;\n          rangeHighLowLine.y2 = highLowLine_1.y2;\n        }\n      });\n    }\n  };\n  /**\r\n   * Creates elements in related legend container, that mimics the look of this\r\n   * Series.\r\n   *\r\n   * @ignore Exclude from docs\r\n   * @param marker  Legend item container\r\n   */\n  OHLCSeries.prototype.createLegendMarker = function (marker) {\n    var w = marker.pixelWidth;\n    var h = marker.pixelHeight;\n    marker.removeChildren();\n    var column = marker.createChild(OHLC);\n    column.shouldClone = false;\n    column.copyFrom(this.columns.template);\n    var cw;\n    var ch;\n    var openLine = column.openLine;\n    var closeLine = column.closeLine;\n    var highLowLine = column.highLowLine;\n    if (this.baseAxis == this.yAxis) {\n      cw = w / 3;\n      ch = h;\n      highLowLine.y = h / 2;\n      highLowLine.x2 = w;\n      openLine.x = w / 3 * 2;\n      openLine.y2 = h / 2;\n      closeLine.x = w / 3;\n      closeLine.y2 = h;\n      closeLine.y1 = h / 2;\n    } else {\n      cw = w;\n      ch = h / 3;\n      highLowLine.x = w / 2;\n      highLowLine.y2 = h;\n      openLine.y = h / 3 * 2;\n      openLine.x2 = w / 2;\n      closeLine.y = h / 3;\n      closeLine.x2 = w;\n      closeLine.x1 = w / 2;\n    }\n    column.width = cw;\n    column.height = ch;\n    $object.copyProperties(this, marker, visualProperties);\n    $object.copyProperties(this.columns.template, column, visualProperties);\n    column.stroke = this.riseFromOpenState.properties.stroke;\n    var legendDataItem = marker.dataItem;\n    legendDataItem.color = column.stroke;\n    legendDataItem.colorOrig = column.stroke;\n  };\n  /**\r\n   * Returns an element to use for Candlestick\r\n   * @ignore\r\n   * @return Element.\r\n   */\n  OHLCSeries.prototype.createColumnTemplate = function () {\n    return new OHLC();\n  };\n  return OHLCSeries;\n}(CandlestickSeries);\nexport { OHLCSeries };\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\nregistry.registeredClasses[\"OHLCSeries\"] = OHLCSeries;\nregistry.registeredClasses[\"OHLCSeriesDataItem\"] = OHLCSeriesDataItem;","map":{"version":3,"mappings":"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","names":["CandlestickSeries","CandlestickSeriesDataItem","visualProperties","OHLC","registry","$object","$iter","$type","__extends","_super","_this","className","applyTheme","OHLCSeries","applyInternalDefaults","hasValue","readerTitle","language","translate","OHLCSeriesDataItem","dataItem","column","openLine_1","openLine","highLowLine_1","highLowLine","closeLine_1","closeLine","baseAxis","xAxis","x","pixelWidth","getWorkingValue","yOpenField","yField","yOpen","yAxis","getY","yClose","yLow","yLowField","yHigh","yHighField","pixelY","y1","y2","x1","x2","y","pixelHeight","xOpenField","xField","xOpen","getX","xClose","xLow","xLowField","xHigh","xHighField","pixelX","each","axisRanges","iterator","axisRange","rangeColumn","rangesColumns","getKey","uid","rangeOpenLine","rangeCloseLine","rangeHighLowLine","marker","w","h","removeChildren","createChild","shouldClone","copyFrom","columns","template","cw","ch","width","height","copyProperties","stroke","riseFromOpenState","properties","legendDataItem","color","colorOrig","registeredClasses"],"sources":["C:\\Users\\Lucian\\Documents\\DEV\\nodejs\\stock-market-api\\dev\\static\\node_modules\\src\\.internal\\charts\\series\\OHLCSeries.ts"],"sourcesContent":["/**\r\n * Candlestick Series module.\r\n */\r\n\r\n/**\r\n * ============================================================================\r\n * IMPORTS\r\n * ============================================================================\r\n * @hidden\r\n */\r\nimport { CandlestickSeries, CandlestickSeriesDataItem, ICandlestickSeriesDataFields, ICandlestickSeriesProperties, ICandlestickSeriesAdapters, ICandlestickSeriesEvents } from \"./CandlestickSeries\";\r\nimport { visualProperties } from \"../../core/Sprite\";\r\nimport { Line } from \"../../core/elements/Line\";\r\nimport { Container } from \"../../core/Container\";\r\nimport { OHLC } from \"../elements/OHLC\";\r\nimport { registry } from \"../../core/Registry\";\r\nimport * as $object from \"../../core/utils/Object\";\r\nimport * as $iter from \"../../core/utils/Iterator\";\r\nimport * as $type from \"../../core/utils/Type\";\r\nimport { LegendDataItem } from \"../../charts/Legend\";\r\n\r\n/**\r\n * ============================================================================\r\n * DATA ITEM\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines a [[DataItem]] for [[OHLCSeries]].\r\n *\r\n * @see {@link DataItem}\r\n */\r\nexport class OHLCSeriesDataItem extends CandlestickSeriesDataItem {\r\n\r\n\t/**\r\n\t * A sprite used to draw the OHLC elements.\r\n\t */\r\n\tpublic _column: OHLC;\r\n\r\n\t/**\r\n\t * Defines a type of [[Component]] this data item is used for\r\n\t * @todo Disabled to work around TS bug (see if we can re-enable it again)\r\n\t */\r\n\t//public _component!: OHLCSeries;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\t\tsuper();\r\n\r\n\t\tthis.className = \"OHLCSeriesDataItem\";\r\n\r\n\t\tthis.applyTheme();\r\n\t}\r\n}\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * REQUISITES\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines data fields for [[OHLCSeries]].\r\n */\r\nexport interface IOHLCSeriesDataFields extends ICandlestickSeriesDataFields { }\r\n\r\n/**\r\n * Defines properties for [[OHLCSeries]].\r\n */\r\nexport interface IOHLCSeriesProperties extends ICandlestickSeriesProperties { }\r\n\r\n/**\r\n * Defines events for [[OHLCSeries]].\r\n */\r\nexport interface IOHLCSeriesEvents extends ICandlestickSeriesEvents { }\r\n\r\n/**\r\n * Defines adapters for [[OHLCSeries]].\r\n *\r\n * @see {@link Adapter}\r\n */\r\nexport interface IOHLCSeriesAdapters extends ICandlestickSeriesAdapters, IOHLCSeriesProperties { }\r\n\r\n\r\n/**\r\n * ============================================================================\r\n * MAIN CLASS\r\n * ============================================================================\r\n * @hidden\r\n */\r\n\r\n/**\r\n * Defines [[Series]] for a candlestick graph.\r\n *\r\n * @see {@link IOHLCSeriesEvents} for a list of available Events\r\n * @see {@link IOHLCSeriesAdapters} for a list of available Adapters\r\n * @todo Example\r\n * @important\r\n */\r\nexport class OHLCSeries extends CandlestickSeries {\r\n\r\n\t/**\r\n\t * Defines the type of data item.\r\n\t */\r\n\tpublic _dataItem: OHLCSeriesDataItem;\r\n\r\n\t/**\r\n\t * Type of column.\r\n\t */\r\n\tpublic _column: OHLC;\r\n\r\n\t/**\r\n\t * Defines available data fields.\r\n\t */\r\n\tpublic _dataFields: IOHLCSeriesDataFields;\r\n\r\n\t/**\r\n\t * Defines available properties.\r\n\t */\r\n\tpublic _properties!: IOHLCSeriesProperties;\r\n\r\n\t/**\r\n\t * Defines available adapters.\r\n\t */\r\n\tpublic _adapter!: IOHLCSeriesAdapters;\r\n\r\n\t/**\r\n\t * Defines available events.\r\n\t */\r\n\tpublic _events!: IOHLCSeriesEvents;\r\n\r\n\t/**\r\n\t * Constructor\r\n\t */\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.className = \"OHLCSeries\";\r\n\r\n\t\tthis.applyTheme();\r\n\t}\r\n\r\n\t/**\r\n\t * Sets defaults that instantiate some objects that rely on parent, so they\r\n\t * cannot be set in constructor.\r\n\t */\r\n\tprotected applyInternalDefaults(): void {\r\n\t\tsuper.applyInternalDefaults();\r\n\t\tif (!$type.hasValue(this.readerTitle)) {\r\n\t\t\tthis.readerTitle = this.language.translate(\"OHLC Series\");\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Returns a new/empty DataItem of the type appropriate for this object.\r\n\t *\r\n\t * @see {@link DataItem}\r\n\t * @return Data Item\r\n\t */\r\n\tprotected createDataItem(): this[\"_dataItem\"] {\r\n\t\treturn new OHLCSeriesDataItem();\r\n\t}\r\n\r\n\r\n\tprotected validateCandlestick(dataItem: this[\"_dataItem\"]) {\r\n\t\tlet column: OHLC = dataItem.column;\r\n\t\tif (column) {\r\n\t\t\tlet openLine = column.openLine;\r\n\t\t\tlet highLowLine = column.highLowLine;\r\n\t\t\tlet closeLine = column.closeLine;\r\n\r\n\t\t\tif (this.baseAxis == this.xAxis) {\r\n\t\t\t\tlet x: number = column.pixelWidth / 2;\r\n\t\t\t\thighLowLine.x = x;\r\n\r\n\t\t\t\t// TODO can these be removed ?\r\n\t\t\t\tdataItem.getWorkingValue(this.yOpenField);\r\n\t\t\t\tdataItem.getWorkingValue(this.yField);\r\n\r\n\t\t\t\tlet yOpen = this.yAxis.getY(dataItem, this.yOpenField);\r\n\t\t\t\tlet yClose = this.yAxis.getY(dataItem, this.yField);\r\n\t\t\t\tlet yLow = this.yAxis.getY(dataItem, this.yLowField);\r\n\t\t\t\tlet yHigh = this.yAxis.getY(dataItem, this.yHighField);\r\n\r\n\t\t\t\tlet pixelY = column.pixelY;\r\n\r\n\t\t\t\topenLine.y1 = yOpen - pixelY;\r\n\t\t\t\topenLine.y2 = yOpen - pixelY;\r\n\t\t\t\topenLine.x1 = 0;\r\n\t\t\t\topenLine.x2 = x;\r\n\r\n\t\t\t\tcloseLine.y1 = yClose - pixelY;\r\n\t\t\t\tcloseLine.y2 = yClose - pixelY;\r\n\t\t\t\tcloseLine.x1 = x;\r\n\t\t\t\tcloseLine.x2 = 2 * x;\r\n\r\n\t\t\t\thighLowLine.y1 = yHigh - pixelY;\r\n\t\t\t\thighLowLine.y2 = yLow - pixelY;\r\n\r\n\t\t\t}\r\n\t\t\tif (this.baseAxis == this.yAxis) {\r\n\t\t\t\tlet y: number = column.pixelHeight / 2;\r\n\r\n\t\t\t\thighLowLine.y = y;\r\n\r\n\t\t\t\t// TODO can these be removed ?\r\n\t\t\t\tdataItem.getWorkingValue(this.xOpenField);\r\n\t\t\t\tdataItem.getWorkingValue(this.xField);\r\n\r\n\t\t\t\tlet xOpen = this.xAxis.getX(dataItem, this.xOpenField);\r\n\t\t\t\tlet xClose = this.xAxis.getX(dataItem, this.xField);\r\n\t\t\t\tlet xLow = this.xAxis.getX(dataItem, this.xLowField);\r\n\t\t\t\tlet xHigh = this.xAxis.getX(dataItem, this.xHighField);\r\n\r\n\t\t\t\tlet pixelX = column.pixelX;\r\n\r\n\t\t\t\topenLine.x1 = xOpen - pixelX;\r\n\t\t\t\topenLine.x2 = xOpen - pixelX;\r\n\t\t\t\topenLine.y1 = y;\r\n\t\t\t\topenLine.y2 = 2 * y;\r\n\r\n\t\t\t\tcloseLine.x1 = xClose - pixelX;\r\n\t\t\t\tcloseLine.x2 = xClose - pixelX;\r\n\t\t\t\tcloseLine.y1 = 0;\r\n\t\t\t\tcloseLine.y2 = y;\r\n\r\n\t\t\t\thighLowLine.x1 = xHigh - pixelX;\r\n\t\t\t\thighLowLine.x2 = xLow - pixelX;\r\n\t\t\t}\r\n\r\n\t\t\t$iter.each(this.axisRanges.iterator(), (axisRange) => {\r\n\r\n\t\t\t\tlet rangeColumn = dataItem.rangesColumns.getKey(axisRange.uid);\r\n\t\t\t\tif (rangeColumn) {\r\n\t\t\t\t\tlet rangeOpenLine = rangeColumn.openLine;\r\n\t\t\t\t\trangeOpenLine.x = openLine.x;\r\n\t\t\t\t\trangeOpenLine.y = openLine.y;\r\n\t\t\t\t\trangeOpenLine.x1 = openLine.x1;\r\n\t\t\t\t\trangeOpenLine.x2 = openLine.x2;\r\n\t\t\t\t\trangeOpenLine.y1 = openLine.y1;\r\n\t\t\t\t\trangeOpenLine.y2 = openLine.y2;\r\n\r\n\t\t\t\t\tlet rangeCloseLine = rangeColumn.closeLine;\r\n\t\t\t\t\trangeCloseLine.x = closeLine.x;\r\n\t\t\t\t\trangeCloseLine.y = closeLine.y;\r\n\t\t\t\t\trangeCloseLine.x1 = closeLine.x1;\r\n\t\t\t\t\trangeCloseLine.x2 = closeLine.x2;\r\n\t\t\t\t\trangeCloseLine.y1 = closeLine.y1;\r\n\t\t\t\t\trangeCloseLine.y2 = closeLine.y2;\r\n\r\n\t\t\t\t\tlet rangeHighLowLine = rangeColumn.highLowLine;\r\n\t\t\t\t\trangeHighLowLine.x = highLowLine.x;\r\n\t\t\t\t\trangeHighLowLine.y = highLowLine.y;\r\n\t\t\t\t\trangeHighLowLine.x1 = highLowLine.x1;\r\n\t\t\t\t\trangeHighLowLine.x2 = highLowLine.x2;\r\n\t\t\t\t\trangeHighLowLine.y1 = highLowLine.y1;\r\n\t\t\t\t\trangeHighLowLine.y2 = highLowLine.y2;\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Creates elements in related legend container, that mimics the look of this\r\n\t * Series.\r\n\t *\r\n\t * @ignore Exclude from docs\r\n\t * @param marker  Legend item container\r\n\t */\r\n\tpublic createLegendMarker(marker: Container): void {\r\n\r\n\t\tlet w: number = marker.pixelWidth;\r\n\t\tlet h: number = marker.pixelHeight;\r\n\r\n\t\tmarker.removeChildren();\r\n\r\n\t\tlet column: OHLC = marker.createChild(OHLC);\r\n\t\tcolumn.shouldClone = false;\r\n\t\tcolumn.copyFrom(<any>this.columns.template);\r\n\r\n\t\tlet cw: number;\r\n\t\tlet ch: number;\r\n\r\n\t\tlet openLine: Line = column.openLine;\r\n\t\tlet closeLine: Line = column.closeLine;\r\n\t\tlet highLowLine: Line = column.highLowLine;\r\n\r\n\t\tif (this.baseAxis == this.yAxis) {\r\n\t\t\tcw = w / 3;\r\n\t\t\tch = h;\r\n\r\n\t\t\thighLowLine.y = h / 2;\r\n\t\t\thighLowLine.x2 = w;\r\n\r\n\t\t\topenLine.x = w / 3 * 2;\r\n\t\t\topenLine.y2 = h / 2;\r\n\r\n\t\t\tcloseLine.x = w / 3;\r\n\t\t\tcloseLine.y2 = h;\r\n\t\t\tcloseLine.y1 = h / 2;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tcw = w;\r\n\t\t\tch = h / 3;\r\n\r\n\t\t\thighLowLine.x = w / 2;\r\n\t\t\thighLowLine.y2 = h;\r\n\r\n\t\t\topenLine.y = h / 3 * 2;\r\n\t\t\topenLine.x2 = w / 2;\r\n\r\n\t\t\tcloseLine.y = h / 3;\r\n\t\t\tcloseLine.x2 = w;\r\n\t\t\tcloseLine.x1 = w / 2;\r\n\t\t}\r\n\t\tcolumn.width = cw;\r\n\t\tcolumn.height = ch;\r\n\r\n\t\t$object.copyProperties(this, marker, visualProperties);\r\n\t\t$object.copyProperties(this.columns.template, column, visualProperties);\r\n\r\n\t\tcolumn.stroke = this.riseFromOpenState.properties.stroke;\r\n\r\n\t\tlet legendDataItem = <LegendDataItem>marker.dataItem;\r\n\t\tlegendDataItem.color = column.stroke;\r\n\t\tlegendDataItem.colorOrig = column.stroke;\r\n\t}\r\n\r\n\t/**\r\n\t * Returns an element to use for Candlestick\r\n\t * @ignore\r\n\t * @return Element.\r\n\t */\r\n\tprotected createColumnTemplate(): this[\"_column\"] {\r\n\t\treturn new OHLC();\r\n\t}\r\n\r\n}\r\n\r\n/**\r\n * Register class in system, so that it can be instantiated using its name from\r\n * anywhere.\r\n *\r\n * @ignore\r\n */\r\nregistry.registeredClasses[\"OHLCSeries\"] = OHLCSeries;\r\nregistry.registeredClasses[\"OHLCSeriesDataItem\"] = OHLCSeriesDataItem;\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}