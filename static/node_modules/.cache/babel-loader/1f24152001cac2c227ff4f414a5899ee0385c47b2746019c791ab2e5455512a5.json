{"ast":null,"code":"import { __awaiter, __extends, __generator } from \"tslib\";\nimport { Settings } from \"../util/Entity\";\nimport { Container } from \"./Container\";\nimport { ListData } from \"../util/Data\";\nimport * as $array from \"../util/Array\";\nimport * as $object from \"../util/Object\";\n/**\r\n * A base element that holds data bit (data item) for any [[Component]].\r\n */\nvar DataItem = /** @class */function (_super) {\n  __extends(DataItem, _super);\n  function DataItem(component, dataContext, settings) {\n    var _this = _super.call(this, settings) || this;\n    /**\r\n     * A data item's owener [[Component]].\r\n     */\n    Object.defineProperty(_this, \"component\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    /**\r\n     * A reference to actual item in source data this item is based on.\r\n     */\n    Object.defineProperty(_this, \"dataContext\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    /**\r\n     * @todo requires description\r\n     */\n    Object.defineProperty(_this, \"bullets\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    /**\r\n     * A set of \"open\" values.\r\n     */\n    Object.defineProperty(_this, \"open\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    /**\r\n     * A set of \"close\" values.\r\n     */\n    Object.defineProperty(_this, \"close\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    _this.dataContext = dataContext;\n    _this.component = component;\n    _this._settings.visible = true;\n    _this._checkDirty();\n    return _this;\n  }\n  /**\r\n   * @ignore\r\n   */\n  Object.defineProperty(DataItem.prototype, \"markDirty\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      this.component.markDirtyValues(this);\n    }\n  });\n  Object.defineProperty(DataItem.prototype, \"_startAnimation\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      this.component._root._addAnimation(this);\n    }\n  });\n  Object.defineProperty(DataItem.prototype, \"_animationTime\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      return this.component._root.animationTime;\n    }\n  });\n  Object.defineProperty(DataItem.prototype, \"_dispose\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      if (this.component) {\n        this.component.disposeDataItem(this);\n      }\n      _super.prototype._dispose.call(this);\n    }\n  });\n  /**\r\n   * Shows a data item that's currently hidden.\r\n   */\n  Object.defineProperty(DataItem.prototype, \"show\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (duration) {\n      this.setRaw(\"visible\", true);\n      if (this.component) {\n        this.component.showDataItem(this, duration);\n      }\n    }\n  });\n  /**\r\n   * Hides a data item that's currently visible.\r\n   */\n  Object.defineProperty(DataItem.prototype, \"hide\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (duration) {\n      this.setRaw(\"visible\", false);\n      if (this.component) {\n        this.component.hideDataItem(this, duration);\n      }\n    }\n  });\n  Object.defineProperty(DataItem.prototype, \"isHidden\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      return !this.get(\"visible\");\n    }\n  });\n  return DataItem;\n}(Settings);\nexport { DataItem };\n/**\r\n * A base class for elements that make use of data.\r\n */\nvar Component = /** @class */function (_super) {\n  __extends(Component, _super);\n  function Component() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n    Object.defineProperty(_this, \"_data\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: new ListData()\n    });\n    Object.defineProperty(_this, \"_dataItems\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: []\n    });\n    Object.defineProperty(_this, \"_mainDataItems\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: _this._dataItems\n    });\n    Object.defineProperty(_this, \"valueFields\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: []\n    });\n    Object.defineProperty(_this, \"fields\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: [\"id\"]\n    });\n    Object.defineProperty(_this, \"_valueFields\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(_this, \"_valueFieldsF\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(_this, \"_fields\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(_this, \"_fieldsF\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(_this, \"_valuesDirty\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: false\n    });\n    Object.defineProperty(_this, \"_dataChanged\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: false\n    });\n    Object.defineProperty(_this, \"_dataGrouped\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: false\n    });\n    /**\r\n     * Indicates if the component has already been initialized.\r\n     */\n    Object.defineProperty(_this, \"inited\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: false\n    });\n    return _this;\n  }\n  Object.defineProperty(Component.prototype, \"data\", {\n    /**\r\n     * @return  Data\r\n     */\n    get: function () {\n      return this._data;\n    },\n    /**\r\n     * Component's data.\r\n     *\r\n     * @see {@link https://www.amcharts.com/docs/v5/concepts/data/} for more info\r\n     */\n    set: function (data) {\n      data.incrementRef();\n      this._data.decrementRef();\n      this._data = data;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Component.prototype, \"_dispose\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      _super.prototype._dispose.call(this);\n      this._data.decrementRef();\n    }\n  });\n  Object.defineProperty(Component.prototype, \"_onDataClear\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {}\n  });\n  Object.defineProperty(Component.prototype, \"_afterNew\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      var _this = this;\n      _super.prototype._afterNew.call(this);\n      this._data.incrementRef();\n      this._updateFields();\n      this._disposers.push(this.data.events.onAll(function (change) {\n        var dataItems = _this._mainDataItems;\n        _this.markDirtyValues();\n        _this._markDirtyGroup();\n        _this._dataChanged = true;\n        if (change.type === \"clear\") {\n          $array.each(dataItems, function (dataItem) {\n            dataItem.dispose();\n          });\n          dataItems.length = 0;\n          _this._onDataClear();\n        } else if (change.type === \"push\") {\n          var dataItem = new DataItem(_this, change.newValue, _this._makeDataItem(change.newValue));\n          dataItems.push(dataItem);\n          _this.processDataItem(dataItem);\n        } else if (change.type === \"setIndex\") {\n          var dataItem_1 = dataItems[change.index];\n          var properties_1 = _this._makeDataItem(change.newValue);\n          $object.keys(properties_1).forEach(function (key) {\n            dataItem_1.animate({\n              key: key,\n              to: properties_1[key],\n              duration: _this.get(\"interpolationDuration\", 0),\n              easing: _this.get(\"interpolationEasing\")\n            });\n          });\n          dataItem_1.dataContext = change.newValue;\n        } else if (change.type === \"insertIndex\") {\n          var dataItem = new DataItem(_this, change.newValue, _this._makeDataItem(change.newValue));\n          dataItems.splice(change.index, 0, dataItem);\n          _this.processDataItem(dataItem);\n        } else if (change.type === \"removeIndex\") {\n          var dataItem = dataItems[change.index];\n          dataItem.dispose();\n          dataItems.splice(change.index, 1);\n        } else if (change.type === \"moveIndex\") {\n          var dataItem = dataItems[change.oldIndex];\n          dataItems.splice(change.oldIndex, 1);\n          dataItems.splice(change.newIndex, 0, dataItem);\n        } else {\n          throw new Error(\"Unknown IStreamEvent type\");\n        }\n        _this._afterDataChange();\n      }));\n    }\n  });\n  Object.defineProperty(Component.prototype, \"_updateFields\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      var _this = this;\n      if (this.valueFields) {\n        this._valueFields = [];\n        this._valueFieldsF = {};\n        $array.each(this.valueFields, function (key) {\n          var field = _this.get(key + \"Field\");\n          if (field) {\n            _this._valueFields.push(key);\n            _this._valueFieldsF[key] = {\n              fieldKey: key + \"Field\",\n              workingKey: key + \"Working\"\n            };\n          }\n        });\n      }\n      if (this.fields) {\n        this._fields = [];\n        this._fieldsF = {};\n        $array.each(this.fields, function (key) {\n          var field = _this.get(key + \"Field\");\n          if (field) {\n            _this._fields.push(key);\n            _this._fieldsF[key] = key + \"Field\";\n          }\n        });\n      }\n    }\n  });\n  Object.defineProperty(Component.prototype, \"dataItems\", {\n    /**\r\n     * A list of component's data items.\r\n     *\r\n     * @return  Data items\r\n     */\n    get: function () {\n      return this._dataItems;\n    },\n    enumerable: false,\n    configurable: true\n  });\n  Object.defineProperty(Component.prototype, \"processDataItem\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (_dataItem) {}\n  });\n  Object.defineProperty(Component.prototype, \"_makeDataItem\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (data) {\n      var _this = this;\n      //const output: this[\"_dataItemSettings\"] = {};\n      var output = {}; // temporary to solve error\n      if (this._valueFields) {\n        $array.each(this._valueFields, function (key) {\n          var field = _this.get(_this._valueFieldsF[key].fieldKey);\n          output[key] = data[field];\n          output[_this._valueFieldsF[key].workingKey] = output[key];\n        });\n      }\n      if (this._fields) {\n        $array.each(this._fields, function (key) {\n          var field = _this.get(_this._fieldsF[key]);\n          output[key] = data[field];\n        });\n      }\n      return output;\n    }\n  });\n  /**\r\n   * @ignore\r\n   */\n  Object.defineProperty(Component.prototype, \"makeDataItem\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (data) {\n      var dataItem = new DataItem(this, undefined, data);\n      this.processDataItem(dataItem);\n      return dataItem;\n    }\n  });\n  /**\r\n   * @ignore\r\n   */\n  Object.defineProperty(Component.prototype, \"pushDataItem\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (data) {\n      var dataItem = this.makeDataItem(data);\n      this._mainDataItems.push(dataItem);\n      return dataItem;\n    }\n  });\n  /**\r\n   * @ignore\r\n   */\n  Object.defineProperty(Component.prototype, \"disposeDataItem\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (_dataItem) {}\n  });\n  /**\r\n   * Shows component's data item.\r\n   *\r\n   * @param   dataItem   Data item\r\n   * @param   _duration  Animation duration in milliseconds\r\n   * @return             Promise\r\n   */\n  Object.defineProperty(Component.prototype, \"showDataItem\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (dataItem, _duration) {\n      return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n          dataItem.set(\"visible\", true);\n          return [2 /*return*/];\n        });\n      });\n    }\n  });\n  /**\r\n   * Hides component's data item.\r\n   *\r\n   * @param   dataItem   Data item\r\n   * @param   _duration  Animation duration in milliseconds\r\n   * @return             Promise\r\n   */\n  Object.defineProperty(Component.prototype, \"hideDataItem\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (dataItem, _duration) {\n      return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n          dataItem.set(\"visible\", false);\n          return [2 /*return*/];\n        });\n      });\n    }\n  });\n\n  Object.defineProperty(Component.prototype, \"_clearDirty\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      _super.prototype._clearDirty.call(this);\n      this._valuesDirty = false;\n    }\n  });\n  Object.defineProperty(Component.prototype, \"_afterDataChange\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {}\n  });\n  Object.defineProperty(Component.prototype, \"_afterChanged\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      _super.prototype._afterChanged.call(this);\n      if (this._dataChanged) {\n        var type = \"datavalidated\";\n        if (this.events.isEnabled(type)) {\n          this.events.dispatch(type, {\n            type: type,\n            target: this\n          });\n        }\n        this._dataChanged = false;\n      }\n      this.inited = true;\n    }\n  });\n  /**\r\n   * Forces a repaint of the element which relies on data.\r\n   *\r\n   * @since 5.0.21\r\n   */\n  Object.defineProperty(Component.prototype, \"markDirtyValues\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function (_dataItem) {\n      this.markDirty();\n      this._valuesDirty = true;\n    }\n  });\n  Object.defineProperty(Component.prototype, \"_markDirtyGroup\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      this._dataGrouped = false;\n    }\n  });\n  /**\r\n   * @ignore\r\n   */\n  Object.defineProperty(Component.prototype, \"markDirtySize\", {\n    enumerable: false,\n    configurable: true,\n    writable: true,\n    value: function () {\n      this._sizeDirty = true;\n      this.markDirty();\n    }\n  });\n  Object.defineProperty(Component, \"className\", {\n    enumerable: true,\n    configurable: true,\n    writable: true,\n    value: \"Component\"\n  });\n  Object.defineProperty(Component, \"classNames\", {\n    enumerable: true,\n    configurable: true,\n    writable: true,\n    value: Container.classNames.concat([Component.className])\n  });\n  return Component;\n}(Container);\nexport { Component };","map":{"version":3,"mappings":"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","names":["Settings","Container","ListData","$array","$object","__extends","component","dataContext","settings","_super","Object","_this","_settings","visible","_checkDirty","markDirtyValues","_root","_addAnimation","animationTime","disposeDataItem","_dispose","duration","setRaw","showDataItem","hideDataItem","get","_dataItems","Component","_data","data","incrementRef","decrementRef","_afterNew","_updateFields","_disposers","push","events","onAll","change","dataItems","_mainDataItems","_markDirtyGroup","_dataChanged","type","each","dataItem","dispose","length","_onDataClear","DataItem","newValue","_makeDataItem","processDataItem","dataItem_1","index","properties_1","keys","forEach","key","animate","to","easing","splice","oldIndex","newIndex","Error","_afterDataChange","valueFields","_valueFields","_valueFieldsF","field","fieldKey","workingKey","fields","_fields","_fieldsF","_dataItem","output","undefined","makeDataItem","_duration","set","_clearDirty","_valuesDirty","_afterChanged","isEnabled","dispatch","target","inited","markDirty","_dataGrouped","_sizeDirty","classNames","concat","className"],"sources":["C:\\Users\\Lucian\\Documents\\DEV\\nodejs\\stock-market-api\\dev\\static\\node_modules\\src\\.internal\\core\\render\\Component.ts"],"sourcesContent":["import { Settings } from \"../util/Entity\";\nimport { Container, IContainerSettings, IContainerPrivate, IContainerEvents } from \"./Container\";\nimport { ListData } from \"../util/Data\";\nimport * as $array from \"../util/Array\";\nimport * as $object from \"../util/Object\";\nimport type * as $ease from \"../util/Ease\";\nimport type { Bullet } from \"./Bullet\";\n\n/**\n * A base element that holds data bit (data item) for any [[Component]].\n */\nexport class DataItem<P extends IComponentDataItem> extends Settings {\n\tdeclare public _settings: P;\n\n\t/**\n\t * A data item's owener [[Component]].\n\t */\n\tpublic component: Component;\n\n\t/**\n\t * A reference to actual item in source data this item is based on.\n\t */\n\tpublic dataContext: unknown;\n\n\t/**\n\t * @todo requires description\n\t */\n\tpublic bullets: Array<Bullet> | undefined;\n\n\t/**\n\t * A set of \"open\" values.\n\t */\n\tpublic open: { [index: string]: any } | undefined;\n\n\t/**\n\t * A set of \"close\" values.\n\t */\n\tpublic close: { [index: string]: any } | undefined;\n\n\tconstructor(component: Component, dataContext: unknown, settings: P) {\n\t\tsuper(settings);\n\n\t\tthis.dataContext = dataContext;\n\t\tthis.component = component;\n\t\tthis._settings.visible = true;\n\t\tthis._checkDirty();\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic markDirty(): void {\n\t\tthis.component.markDirtyValues(this);\n\t}\n\n\tpublic _startAnimation(): void {\n\t\tthis.component._root._addAnimation(this);\n\t}\n\n\tprotected _animationTime(): number | null {\n\t\treturn this.component._root.animationTime;\n\t}\n\n\tprotected _dispose() {\n\t\tif (this.component) {\n\t\t\tthis.component.disposeDataItem(this);\n\t\t}\n\t\tsuper._dispose();\n\t}\n\n\t/**\n\t * Shows a data item that's currently hidden.\n\t */\n\tpublic show(duration?: number) {\n\t\tthis.setRaw(\"visible\", true);\n\t\tif (this.component) {\n\t\t\tthis.component.showDataItem(this, duration);\n\t\t}\n\t}\n\n\t/**\n\t * Hides a data item that's currently visible.\n\t */\n\tpublic hide(duration?: number) {\n\t\tthis.setRaw(\"visible\", false);\n\t\tif (this.component) {\n\t\t\tthis.component.hideDataItem(this, duration);\n\t\t}\n\t}\n\n\tpublic isHidden() {\n\t\treturn !this.get(\"visible\");\n\t}\n}\n\n\nexport interface IComponentDataItem {\n\tvisible?: boolean;\n}\n\nexport interface IComponentSettings extends IContainerSettings {\n\n\t/**\n\t * A duration of the animation from one setting value to another, in\n\t * milliseconds.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/animations/#Animating_data_values} for more info\n\t */\n\tinterpolationDuration?: number;\n\n\t/**\n\t * Easing function to use for cross setting value animations.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/animations/#Easing_functions} for more info\n\t */\n\tinterpolationEasing?: $ease.Easing;\n\n}\n\nexport interface IComponentPrivate extends IContainerPrivate {\n}\n\nexport interface IComponentEvents extends IContainerEvents {\n\tdatavalidated: {}\n}\n\n/**\n * A base class for elements that make use of data.\n */\nexport abstract class Component extends Container {\n\tpublic static className: string = \"Component\";\n\tpublic static classNames: Array<string> = Container.classNames.concat([Component.className]);\n\n\tdeclare public _settings: IComponentSettings;\n\tdeclare public _privateSettings: IComponentPrivate;\n\tdeclare public _dataItemSettings: IComponentDataItem;\n\tdeclare public _events: IComponentEvents;\n\n\tprotected _data: ListData<unknown> = new ListData();\n\n\tprotected _dataItems: Array<DataItem<this[\"_dataItemSettings\"]>> = [];\n\n\tpublic _mainDataItems = this._dataItems;\n\n\tprotected valueFields: Array<string> = [];\n\tprotected fields: Array<string> = [\"id\"];\n\n\tprotected _valueFields!: Array<string>;\n\tprotected _valueFieldsF!: { [index: string]: { fieldKey: string, workingKey: string } };\n\n\tprotected _fields!: Array<string>;\n\tprotected _fieldsF!: { [index: string]: string };\n\n\tpublic _valuesDirty: boolean = false;\n\n\tprotected _dataChanged: boolean = false;\n\n\tprotected _dataGrouped = false;\n\n\t/**\n\t * Indicates if the component has already been initialized.\n\t */\n\tpublic inited: boolean = false;\n\n\t/**\n\t * Component's data.\n\t *\n\t * @see {@link https://www.amcharts.com/docs/v5/concepts/data/} for more info\n\t */\n\tpublic set data(data: ListData<unknown>) {\n\t\tdata.incrementRef();\n\t\tthis._data.decrementRef();\n\t\tthis._data = data;\n\t}\n\n\t/**\n\t * @return  Data\n\t */\n\tpublic get data(): ListData<unknown> {\n\t\treturn this._data;\n\t}\n\n\tprotected _dispose() {\n\t\tsuper._dispose();\n\t\tthis._data.decrementRef();\n\t}\n\n\tprotected _onDataClear() {\n\n\t}\n\n\tprotected _afterNew() {\n\t\tsuper._afterNew();\n\n\t\tthis._data.incrementRef();\n\t\tthis._updateFields();\n\n\t\tthis._disposers.push(this.data.events.onAll((change) => {\n\t\t\tconst dataItems = this._mainDataItems;\n\t\t\tthis.markDirtyValues();\n\t\t\tthis._markDirtyGroup();\n\t\t\tthis._dataChanged = true;\n\t\t\tif (change.type === \"clear\") {\n\t\t\t\t$array.each(dataItems, (dataItem) => {\n\t\t\t\t\tdataItem.dispose();\n\t\t\t\t});\n\n\t\t\t\tdataItems.length = 0;\n\t\t\t\tthis._onDataClear();\n\t\t\t} else if (change.type === \"push\") {\n\t\t\t\tconst dataItem = new DataItem(this, change.newValue, this._makeDataItem(change.newValue));\n\t\t\t\tdataItems.push(dataItem);\n\t\t\t\tthis.processDataItem(dataItem);\n\n\t\t\t} else if (change.type === \"setIndex\") {\n\t\t\t\tconst dataItem = dataItems[change.index];\n\t\t\t\tconst properties = this._makeDataItem(change.newValue);\n\n\t\t\t\t$object.keys(properties).forEach((key) => {\n\t\t\t\t\tdataItem.animate({\n\t\t\t\t\t\tkey: key,\n\t\t\t\t\t\tto: properties[key],\n\t\t\t\t\t\tduration: this.get(\"interpolationDuration\", 0),\n\t\t\t\t\t\teasing: this.get(\"interpolationEasing\"),\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t\tdataItem.dataContext = change.newValue;\n\n\t\t\t} else if (change.type === \"insertIndex\") {\n\t\t\t\tconst dataItem = new DataItem(this, change.newValue, this._makeDataItem(change.newValue));\n\t\t\t\tdataItems.splice(change.index, 0, dataItem);\n\t\t\t\tthis.processDataItem(dataItem);\n\n\t\t\t} else if (change.type === \"removeIndex\") {\n\t\t\t\tconst dataItem = dataItems[change.index];\n\t\t\t\tdataItem.dispose();\n\t\t\t\tdataItems.splice(change.index, 1);\n\n\t\t\t} else if (change.type === \"moveIndex\") {\n\t\t\t\tconst dataItem = dataItems[change.oldIndex];\n\t\t\t\tdataItems.splice(change.oldIndex, 1);\n\t\t\t\tdataItems.splice(change.newIndex, 0, dataItem);\n\n\t\t\t} else {\n\t\t\t\tthrow new Error(\"Unknown IStreamEvent type\");\n\t\t\t}\n\n\t\t\tthis._afterDataChange();\n\t\t}));\n\t}\n\n\tprotected _updateFields() {\n\t\tif (this.valueFields) {\n\t\t\tthis._valueFields = [];\n\t\t\tthis._valueFieldsF = {};\n\n\t\t\t$array.each(this.valueFields as Array<keyof this[\"_settings\"]>, (key) => {\n\t\t\t\tconst field = this.get(<any>(key + \"Field\"));\n\t\t\t\tif (field) {\n\t\t\t\t\tthis._valueFields.push(<any>key);\n\t\t\t\t\tthis._valueFieldsF[key as string] = { fieldKey: key + \"Field\", workingKey: key + \"Working\" };\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (this.fields) {\n\t\t\tthis._fields = [];\n\t\t\tthis._fieldsF = {};\n\n\t\t\t$array.each(this.fields as Array<keyof this[\"_settings\"]>, (key) => {\n\t\t\t\tconst field = this.get(<any>(key + \"Field\"));\n\t\t\t\tif (field) {\n\t\t\t\t\tthis._fields.push(<any>key);\n\t\t\t\t\tthis._fieldsF[key as string] = key + \"Field\";\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\t/**\n\t * A list of component's data items.\n\t *\n\t * @return  Data items\n\t */\n\tpublic get dataItems(): Array<DataItem<this[\"_dataItemSettings\"]>> {\n\t\treturn this._dataItems;\n\t}\n\n\tprotected processDataItem(_dataItem: DataItem<this[\"_dataItemSettings\"]>) { }\n\n\n\tpublic _makeDataItem(data: unknown): this[\"_dataItemSettings\"] {\n\t\t//const output: this[\"_dataItemSettings\"] = {};\n\t\tconst output: any = {}; // temporary to solve error\n\t\tif (this._valueFields) {\n\t\t\t$array.each(this._valueFields, (key) => {\n\t\t\t\tconst field = this.get(<any>(this._valueFieldsF[key].fieldKey));\n\t\t\t\toutput[key] = (data as any)[field];\n\n\t\t\t\toutput[this._valueFieldsF[key].workingKey] = output[key];\n\t\t\t});\n\t\t}\n\t\tif (this._fields) {\n\t\t\t$array.each(this._fields, (key) => {\n\t\t\t\tconst field = this.get(<any>(this._fieldsF[key]));\n\t\t\t\toutput[key] = (data as any)[field];\n\t\t\t});\n\t\t}\n\n\t\treturn output;\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic makeDataItem(data: this[\"_dataItemSettings\"]): DataItem<this[\"_dataItemSettings\"]> {\n\t\tlet dataItem = new DataItem(this, undefined, data);\n\t\tthis.processDataItem(dataItem);\n\t\treturn dataItem;\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic pushDataItem(data: this[\"_dataItemSettings\"]): DataItem<this[\"_dataItemSettings\"]> {\n\t\tconst dataItem = this.makeDataItem(data);\n\t\tthis._mainDataItems.push(dataItem);\n\t\treturn dataItem;\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic disposeDataItem(_dataItem: DataItem<this[\"_dataItemSettings\"]>) {\n\t\t\n\t}\n\n\t/**\n\t * Shows component's data item.\n\t *\n\t * @param   dataItem   Data item\n\t * @param   _duration  Animation duration in milliseconds\n\t * @return             Promise\n\t */\n\tpublic async showDataItem(dataItem: DataItem<this[\"_dataItemSettings\"]>, _duration?: number): Promise<void> {\n\t\tdataItem.set(\"visible\", true);\n\t}\n\n\t/**\n\t * Hides component's data item.\n\t *\n\t * @param   dataItem   Data item\n\t * @param   _duration  Animation duration in milliseconds\n\t * @return             Promise\n\t */\n\tpublic async hideDataItem(dataItem: DataItem<this[\"_dataItemSettings\"]>, _duration?: number): Promise<void> {\n\t\tdataItem.set(\"visible\", false);\n\t}\n\n\tpublic _clearDirty() {\n\t\tsuper._clearDirty();\n\t\tthis._valuesDirty = false;\n\t}\n\n\tprotected _afterDataChange() {\n\n\t}\n\n\tpublic _afterChanged() {\n\t\tsuper._afterChanged();\n\t\tif (this._dataChanged) {\n\t\t\tconst type = \"datavalidated\";\n\t\t\tif (this.events.isEnabled(type)) {\n\t\t\t\tthis.events.dispatch(type, { type: type, target: this });\n\t\t\t}\n\t\t\tthis._dataChanged = false;\n\t\t}\n\n\t\tthis.inited = true;\n\t}\n\n\t/**\n\t * Forces a repaint of the element which relies on data.\n\t *\n\t * @since 5.0.21\n\t */\n\tpublic markDirtyValues(_dataItem?: DataItem<this[\"_dataItemSettings\"]>) {\n\t\tthis.markDirty();\n\t\tthis._valuesDirty = true;\n\t}\n\n\tpublic _markDirtyGroup() {\n\t\tthis._dataGrouped = false;\n\t}\n\n\t/**\n\t * @ignore\n\t */\n\tpublic markDirtySize() {\n\t\tthis._sizeDirty = true;\n\t\tthis.markDirty();\n\t}\n\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}